# ç¬¬ä¸€ç« ï¼šå‚æ•°ä¼ é€’æœºåˆ¶ï¼ˆâ­ï¼‰

## 1.1 åŒä¸€å‡½æ•°å†…å˜é‡çš„ä¼ é€’

* å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡ï¼Œå°±æ˜¯å°†å˜é‡çš„å€¼ä¼ é€’è¿‡å»ï¼Œå³ï¼šå€¼ä¼ é€’ã€‚
* å¯¹äºæ•°ç»„ï¼Œå°±æ˜¯å°†æ•°ç»„çš„åœ°å€ä¼ é€’è¿‡å»ï¼Œå³ï¼šåœ°å€ä¼ é€’ã€‚
* å¯¹äºæŒ‡é’ˆï¼Œå°±æ˜¯å°†æŒ‡é’ˆä¿å­˜çš„åœ°å€ä¼ é€’è¿‡å»ï¼Œå³ï¼šåœ°å€ä¼ é€’ã€‚

> [!IMPORTANT]
>
> ä¸¥æ ¼æ„ä¹‰ä¸Šè®²ï¼šC è¯­è¨€ä¸­ï¼Œå‚æ•°çš„ä¼ é€’æœºåˆ¶åªæœ‰â€œå€¼ä¼ é€’â€ï¼Œåªæ˜¯ä¼ é€’çš„â€œå€¼â€å†…å®¹ä¸åŒï¼Œæ‰è¡¨ç°å‡ºä¸åŒçš„æ•ˆæœï¼ï¼ï¼
>
> ::: details ç‚¹æˆ‘æŸ¥çœ‹
>
> * â‘  å¯¹äº`åŸºæœ¬æ•°æ®ç±»å‹`çš„å˜é‡è€Œè¨€ï¼Œä¼ é€’çš„æ˜¯å˜é‡çš„å€¼çš„å‰¯æœ¬ã€‚
> * â‘¡ å¯¹äº`æ•°ç»„`è€Œè¨€ï¼Œä¼ é€’çš„æ˜¯æ•°ç»„é¦–å…ƒç´ çš„åœ°å€ã€‚è™½ç„¶ä¼ é€’çš„æ˜¯ä¸€ä¸ªå€¼ï¼ˆæ•°ç»„é¦–å…ƒç´ çš„åœ°å€ï¼‰ï¼›ä½†æ˜¯ï¼Œæœ¬è´¨ä¸Šä¾ç„¶æ˜¯ä¼ é€’äº†åœ°å€çš„â€œå€¼â€çš„å‰¯æœ¬ã€‚
> * â‘¢ å¯¹äº`æŒ‡é’ˆ`è€Œè¨€ï¼Œä¼ é€’çš„æ˜¯æŒ‡é’ˆå˜é‡çš„å€¼ï¼ˆæŒ‡é’ˆå˜é‡ä¸­ä¿å­˜çš„å†…å­˜åœ°å€ï¼‰ï¼›ä½†æ˜¯ï¼Œæœ¬è´¨ä¸Šä¾ç„¶æ˜¯ä¼ é€’äº†åœ°å€çš„â€œå€¼â€çš„å‰¯æœ¬ã€‚
>
> :::



* ç¤ºä¾‹ï¼š

```c {10}
#include <stdio.h>

int main() {

    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);

    int a = 10;
    // å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡ï¼Œå°±æ˜¯å°†å˜é‡çš„å€¼ä¼ é€’è¿‡å»ï¼Œå³ï¼šå€¼ä¼ é€’ã€‚
    int b = a;

    printf("a = %d\n", a); // a = 10
    printf("b = %d\n", b); // b = 10

    b = 20;

    printf("a = %d\n", a); // a = 10
    printf("b = %d\n", b); // b = 20

    return 0;
}
```



* ç¤ºä¾‹ï¼š

```c {11}
#include <stdio.h>

int main() {

    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);

    int arr[] = {1, 2, 3, 4, 5};

    // å¯¹äºæ•°ç»„ï¼Œå°±æ˜¯å°†æ•°ç»„çš„åœ°å€ä¼ é€’è¿‡å»ï¼Œå³ï¼šåœ°å€ä¼ é€’ã€‚
    int *p = arr;

    // éå†æ•°ç»„
    for (int i = 0; i < sizeof(arr) / sizeof(int); ++i) {
        printf("arr[%d] = %d \n", i, arr[i]);
    }

    printf("\n");

    p[0] = 2;
    p[1] = 4;
    p[2] = 6;
    p[3] = 8;
    p[4] = 10;

    // éå†æ•°ç»„
    for (int i = 0; i < sizeof(arr) / sizeof(int); ++i) {
        printf("arr[%d] = %d\n", i, arr[i]);
    }

    return 0;
}
```



* ç¤ºä¾‹ï¼š

```c {15}
#include <stdio.h>

int main() {

    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);

    int num = 10;

    printf("num = %d\n", num); // num = 10

    int *p = &num;

    // å¯¹äºæŒ‡é’ˆï¼Œå°±æ˜¯å°†æŒ‡é’ˆä¿å­˜çš„åœ°å€ä¼ é€’è¿‡å»ï¼Œå³ï¼šåœ°å€ä¼ é€’ã€‚
    int *q = p;

    *q = 20;

    printf("num = %d\n", num); // num = 20

    return 0;
}
```

## 1.2 å½¢å‚å’Œå®å‚

* `å½¢å‚`ï¼ˆformal parameterï¼‰ï¼šåœ¨å®šä¹‰å‡½æ•°æ—¶ï¼Œå‡½æ•°ååé¢æ‹¬å·`()`å†…å£°æ˜çš„`å˜é‡`ç§°ä¸º`å½¢å¼å‚æ•°`ï¼Œç®€ç§°ä¸º`å½¢å‚`ã€‚
* `å®å‚`ï¼ˆactual parameterï¼‰ï¼šåœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå‡½æ•°ååé¢æ‹¬å·`()`å†…ä½¿ç”¨çš„`å€¼`ã€`å˜é‡`æˆ–`è¡¨è¾¾å¼`ç§°ä¸º`å®é™…å‚æ•°`ï¼Œç®€ç§°`å®å‚`ã€‚

> [!IMPORTANT]
>
> ::: details ç‚¹æˆ‘æŸ¥çœ‹ å‡½æ•°ä¸­`å½¢å‚`å’Œ`å®å‚`çš„åŒºåˆ«
>
> * â‘  `å®šä¹‰å’Œè°ƒç”¨çš„åŒºåˆ«`ï¼š
>   * `å½¢å‚`ï¼šåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™ï¼Œåˆ—åœ¨å‡½æ•°ååé¢æ‹¬å·`()`ä¸­çš„å˜é‡ç§°ä¸º`å½¢å‚`ã€‚å½¢å‚ä»…ä»…æ˜¯ä¸€ç§å ä½ç¬¦ï¼Œè¡¨ç¤ºåœ¨è°ƒç”¨è¯¥å‡½æ•°æ—¶åº”ä¼ é€’çš„æ•°æ®çš„ç±»å‹å’Œé¡ºåºã€‚
>   * `å®å‚`ï¼šå½“æˆ‘ä»¬å»å¸¦å“¦ç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå‡½æ•°ååé¢æ‹¬å·`()`å†…ä½¿ç”¨çš„`å€¼`ã€`å˜é‡`æˆ–`è¡¨è¾¾å¼`ç§°ä¸º`å®é™…å‚æ•°`ï¼Œç®€ç§°`å®å‚`ã€‚
> * â‘¡ `å­˜å‚¨`ï¼š
>   * `å½¢å‚`ï¼šå®ƒæ˜¯å±€éƒ¨å˜é‡çš„ç‰¹æ®Šå½¢å¼ï¼Œå­˜å‚¨åœ¨æ ˆåŒºã€‚ä¸ä¸€èˆ¬å‡½æ•°ä½“å†…çš„å±€éƒ¨å˜é‡ä¸€æ ·ï¼Œå½¢å‚åœ¨å‡½æ•°è°ƒç”¨æ—¶è¿›è¡Œåˆå§‹åŒ–ã€‚
>   * `å®å‚`ï¼šå®å‚å¯ä»¥æ˜¯å¸¸é‡ã€å˜é‡æˆ–è¡¨è¾¾å¼ï¼Œå…·ä½“è€Œè¨€åˆå¯ä»¥æ˜¯å±€éƒ¨å˜é‡ã€å…¨å±€å˜é‡ç­‰ï¼Œå­˜å‚¨ä½ç½®ä¸å®šã€‚
> * â‘¢ `ç”Ÿå‘½å‘¨æœŸ`ï¼š
>   * `å½¢å‚`ï¼šå®ƒçš„ç”Ÿå‘½å‘¨æœŸå–å†³äºå‡½æ•°è°ƒç”¨æœŸé—´ã€‚å‡½æ•°è°ƒç”¨ç»“æŸåï¼Œå½¢å‚ä½œä¸ºå±€éƒ¨å˜é‡å°±ä¼šè¢«é”€æ¯ã€‚
>   * `å®å‚`ï¼šå…¶ç”Ÿå‘½å‘¨æœŸå–å†³äºå…¶ç±»å‹ã€‚å¦‚æœå®å‚æ˜¯å±€éƒ¨å˜é‡ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸æ‰€åœ¨çš„ä½œç”¨åŸŸ`"{}"`æœ‰å…³ï¼›è‹¥ä¸ºå…¨å±€å˜é‡ï¼Œåˆ™ä»ç¨‹åºå¯åŠ¨åˆ°ç»“æŸç­‰ç­‰ã€‚
>
> :::



* ç¤ºä¾‹ï¼š

```c {9,22}
#include <stdio.h>

/**
 * æ±‚å’Œ
 * @param x å½¢å‚
 * @param y å½¢å‚
 * @return
 */
int add(int x, int y) {
    return x + y;
}

int main() {

    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);

    int a = 10;
    int b = 20;

    // a å’Œ b æ˜¯å®å‚
    int result = add(a, b);

    printf("%d + %d = %d\n", a, b, result);

    return 0;
}
```

## 1.3 å‚æ•°çš„ä¼ é€’æœºåˆ¶

### 1.3.1 æ¦‚è¿°

* å‡½æ•°ä¸­`å½¢å‚`å’Œ`å®å‚`çš„ä¸»è¦åŠŸèƒ½æ˜¯`æ•°æ®ä¼ é€’`ï¼ŒæŒ‰ç…§ä¼ é€’çš„æ•°æ®æ˜¯`å€¼`è¿˜æ˜¯`åœ°å€`ï¼Œåˆ†ä¸º`å€¼ä¼ é€’`å’Œ`åœ°å€ä¼ é€’`ä¸¤ç§ã€‚

> [!IMPORTANT]
>
> ä¸¥æ ¼æ„ä¹‰ä¸Šè®²ï¼šC è¯­è¨€ä¸­ï¼Œå‚æ•°çš„ä¼ é€’æœºåˆ¶åªæœ‰â€œå€¼ä¼ é€’â€ï¼Œåªæ˜¯ä¼ é€’çš„â€œå€¼â€å†…å®¹ä¸åŒï¼Œæ‰è¡¨ç°å‡ºä¸åŒçš„æ•ˆæœï¼ï¼ï¼
>
> ::: details ç‚¹æˆ‘æŸ¥çœ‹
>
> * â‘  å¯¹äº`åŸºæœ¬æ•°æ®ç±»å‹`çš„å˜é‡è€Œè¨€ï¼Œä¼ é€’çš„æ˜¯å˜é‡çš„å€¼çš„å‰¯æœ¬ã€‚
> * â‘¡ å¯¹äº`æ•°ç»„`è€Œè¨€ï¼Œä¼ é€’çš„æ˜¯æ•°ç»„é¦–å…ƒç´ çš„åœ°å€ã€‚è™½ç„¶ä¼ é€’çš„æ˜¯ä¸€ä¸ªå€¼ï¼ˆæ•°ç»„é¦–å…ƒç´ çš„åœ°å€ï¼‰ï¼›ä½†æ˜¯ï¼Œæœ¬è´¨ä¸Šä¾ç„¶æ˜¯ä¼ é€’äº†åœ°å€çš„â€œå€¼â€çš„å‰¯æœ¬ã€‚
> * â‘¢ å¯¹äº`æŒ‡é’ˆ`è€Œè¨€ï¼Œä¼ é€’çš„æ˜¯æŒ‡é’ˆå˜é‡çš„å€¼ï¼ˆæŒ‡é’ˆå˜é‡ä¸­ä¿å­˜çš„å†…å­˜åœ°å€ï¼‰ï¼›ä½†æ˜¯ï¼Œæœ¬è´¨ä¸Šä¾ç„¶æ˜¯ä¼ é€’äº†åœ°å€çš„â€œå€¼â€çš„å‰¯æœ¬ã€‚
>
> :::

### 1.3.2 å‚æ•°çš„ä¼ é€’æœºåˆ¶ 1ï¼šå€¼ä¼ é€’

* `å€¼ä¼ é€’`ï¼šå°±æ˜¯æŠŠä¸»è°ƒå‡½æ•°çš„`å®å‚å€¼`å¤åˆ¶ç»™è¢«è°ƒç”¨å‡½æ•°çš„`å½¢å‚` ï¼Œä½¿å½¢å‚è·å¾—åˆå§‹å€¼ã€‚

> [!NOTE]
>
> * â‘  å¦‚æœåœ¨å‡½æ•°å†…å¯¹`å½¢å‚å€¼`çš„ä¿®æ”¹ï¼Œä¸ä¼šå½±å“`å®å‚å€¼`ï¼ï¼ï¼
> * â‘¡ å€¼ä¼ é€’ï¼Œæ˜¯`å•å‘ä¼ é€’` ï¼Œåªèƒ½æŠŠå®å‚çš„å€¼ä¼ é€’ç»™å½¢å‚ï¼Œè€Œä¸èƒ½æŠŠå½¢å‚çš„å€¼å†ä¼ å›ç»™å®å‚ã€‚
> * â‘¢ é»˜è®¤`å€¼ä¼ é€’`çš„ç±»å‹æ˜¯ï¼š`åŸºæœ¬æ•°æ®ç±»å‹ (æ•´å‹ç±»å‹ã€æµ®ç‚¹ç±»å‹ï¼Œå­—ç¬¦ç±» å‹)`ã€`ç»“æ„ä½“`ã€`å…±ç”¨ä½“`ã€`æšä¸¾ç±»å‹`ã€‚



* ç¤ºä¾‹ï¼š

```c {3,17}
#include <stdio.h>

void increment(int a) {
    a++;
    printf("increment ä¸­ a = %d\n", a); // increment ä¸­ a = 11
}

int main() {

    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);

    int i = 10;

    printf("main ä¸­ i = %d\n", i); // main ä¸­ i = 10

    increment(i);

    printf("main ä¸­ i = %d\n", i); // main ä¸­ i = 10

    return 0;
}
```



* ç¤ºä¾‹ï¼š

```c {8,28}
#include <stdio.h>

/**
 * äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼
 * @param x
 * @param y
 */
void swap(int x, int y) {
    int temp = x;
    x        = y;
    y        = temp;

    // swap å‡½æ•°ï¼šx=20ï¼Œy=10
    printf("swap å‡½æ•°ï¼šx=%dï¼Œy=%d\n", x, y);
}

int main() {

    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);

    int a = 10;
    int b = 20;

    // main å‡½æ•°ï¼ša = 10ï¼Œb = 20
    printf("main å‡½æ•°ï¼ša = %dï¼Œb = %d\n", a, b);

    swap(a, b);

    // main å‡½æ•°ï¼ša = 10ï¼Œb = 20
    printf("main å‡½æ•°ï¼ša = %dï¼Œb = %d\n", a, b);

    return 0;
}
```

### 1.3.3 å‚æ•°çš„ä¼ é€’æœºåˆ¶ 2ï¼šåœ°å€ä¼ é€’

#### 1.3.3.1 æ¦‚è¿°

* `åœ°å€ä¼ é€’`ï¼šå°±æ˜¯æŠŠ`å®å‚åœ°å€å¸¸é‡`è¿›è¡Œ`å¤åˆ¶`ï¼Œä¼ é€ç»™`å½¢å‚`ï¼Œä½¿å½¢å‚è·å¾—åˆå§‹å€¼ã€‚

> [!NOTE]
>
> * â‘  é»˜è®¤`åœ°å€ä¼ é€’`çš„ç±»å‹æ˜¯ï¼š`æŒ‡é’ˆ`ã€`æ•°ç»„`ã€‚å®å‚å°†åœ°å€ä¼ é€’ç»™å½¢å‚ï¼ŒäºŒè€…åœ°å€å€¼ç›¸åŒã€‚
> * â‘¡ å½“`æŒ‡é’ˆ`ä½œä¸ºå‡½æ•°çš„å½¢å‚æ—¶ï¼Œå®å‚ä¼ é€’ç»™å½¢å‚çš„æ˜¯åœ°å€ï¼Œ åœ¨å‡½æ•°ä¸­é€šè¿‡å½¢å‚ä¿å­˜çš„åœ°å€è®¿é—®å®å‚ï¼Œè¿›è€Œåœ¨å‡½æ•°ä¸­é€šè¿‡åœ°å€å¯¹å®å‚çš„ä¿®æ”¹å½±å“åˆ°å®å‚çš„å€¼ã€‚è¿™ä¹Ÿç§°ä¸º`åŒå‘ä¼ é€’` ã€‚
> * â‘¢ å½“ä¼ é€’`æ•°ç»„é¦–å…ƒç´ åœ°å€`æ—¶ï¼Œå³æŠŠå®å‚æ•°ç»„çš„èµ·å§‹åœ°å€ä¼ é€’ç»™å½¢å‚ã€‚è¿™æ ·å½¢å‚å’Œå®å‚æ•°ç»„å°±å ç”¨äº†å…±åŒçš„å­˜å‚¨ç©ºé—´ã€‚åœ¨è¢«è°ƒå‡½æ•°ä¸­ï¼Œå¦‚æœé€šè¿‡å½¢å‚ä¿®æ”¹äº†æ•°ç»„å…ƒç´ å€¼ï¼Œè°ƒç”¨å‡½æ•°åå®å‚æ•°ç»„å…ƒç´ å€¼ä¹Ÿå‘ç”Ÿç›¸åº”å˜åŒ–ã€‚

#### 1.3.3.2 ç®€å•å˜é‡æŒ‡é’ˆä½œä¸ºå½¢å‚

* å½“å‡½æ•°çš„å½¢å‚ç±»å‹æ˜¯æŒ‡é’ˆç±»å‹æ—¶ï¼Œä½¿ç”¨è¯¥å‡½æ•°æ—¶ï¼Œéœ€è¦ä¼ é€’æŒ‡é’ˆï¼ˆå†…å­˜åœ°å€ï¼‰ï¼Œæˆ–è€…æ•°ç»„ç»™è¯¥å½¢å‚ã€‚å‡½æ•°å†…ä»¥æŒ‡é’ˆçš„æ–¹å¼æ“ä½œå˜é‡(`*æŒ‡é’ˆ`)ã€‚



* ç¤ºä¾‹ï¼š

```c {3,17}
#include <stdio.h>

void increment(int *a) {
    (*a)++;
    printf("increment ä¸­ a = %d\n", *a); // increment ä¸­ a = 11
}

int main() {

    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);

    int i = 10;

    printf("main ä¸­ i = %d\n", i); // main ä¸­ i = 10

    increment(&i);

    printf("main ä¸­ i = %d\n", i); // main ä¸­ i = 11

    return 0;
}
```



* ç¤ºä¾‹ï¼š

```c {8,28}
#include <stdio.h>

/**
 * äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼
 * @param x
 * @param y
 */
void swap(int *x, int *y) {
    int temp = *x;
    *x       = *y;
    *y       = temp;

    // swap å‡½æ•°ï¼šx=20ï¼Œy=10
    printf("swap å‡½æ•°ï¼šx=%dï¼Œy=%d\n", *x, *y);
}

int main() {

    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);

    int a = 10;
    int b = 20;

    // main å‡½æ•°ï¼ša = 10ï¼Œb = 20
    printf("main å‡½æ•°ï¼ša = %dï¼Œb = %d\n", a, b);

    swap(&a, &b);

    // main å‡½æ•°ï¼ša = 20ï¼Œb = 10
    printf("main å‡½æ•°ï¼ša = %dï¼Œb = %d\n", a, b);

    return 0;
}
```

#### 1.3.3.3 æ•°ç»„ä½œä¸ºå½¢å‚

* å½“æ•°ç»„åä½œä¸ºå‡½æ•°çš„å‚æ•°çš„æ—¶å€™ï¼Œä¼šé€€åŒ–ä¸ºæŒ‡é’ˆã€‚



* ç¤ºä¾‹ï¼š

```c {8,28}
#include <stdio.h>

/**
 * å°†æ•°ç»„ä¸­çš„å…ƒç´  * 2
 * @param arr
 * @param len
 */
void setValue(int arr[], int len) {
    for (int i = 0; i < len; ++i) {
        arr[i] = i * 2;
    }
}

int main() {

    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);

    int arr[] = {1, 2, 3, 4, 5};

    // éå†æ•°ç»„
    for (int i = 0; i < 5; i++) {
        printf("arr[%d]=%d\n", i, arr[i]);
    }

    printf("\n");

    setValue(arr, sizeof(arr) / sizeof(int));

    // éå†æ•°ç»„
    for (int i = 0; i < 5; i++) {
        printf("arr[%d]=%d\n", i, arr[i]);
    }

    return 0;
}
```



* ç¤ºä¾‹ï¼š

```c {8,30}
#include <stdio.h>

/**
 * æ•°ç»„å…ƒç´ çš„åè½¬
 * @param arr
 * @param len
 */
void reverse(int arr[], int len) {
    for (int left = 0, right = len - 1; left < right; ++left, --right) {
        int temp   = arr[left];
        arr[left]  = arr[right];
        arr[right] = temp;
    }
}

int main() {

    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);

    int arr[] = {1, 2, 3, 4, 5};

    // éå†æ•°ç»„
    for (int i = 0; i < 5; i++) {
        printf("arr[%d]=%d\n", i, arr[i]);
    }

    printf("\n");

    reverse(arr, sizeof(arr) / sizeof(int));

    // éå†æ•°ç»„
    for (int i = 0; i < 5; i++) {
        printf("arr[%d]=%d\n", i, arr[i]);
    }

    return 0;
}
```

#### 1.3.3.4 å­—ç¬¦ä¸²ä½œä¸ºå½¢å‚

* å­—ç¬¦ä¸²æœ¬è´¨ä¸Šå°±æ˜¯å­—ç¬¦æ•°ç»„ï¼Œè€Œå­—ç¬¦æ•°ç»„ä½œä¸ºå‡½æ•°çš„å‚æ•°çš„æ—¶å€™ï¼Œä¼šé€€åŒ–ä¸ºæŒ‡é’ˆã€‚



* ç¤ºä¾‹ï¼š

```c {8,26}
#include <stdio.h>

/**
 * ç»Ÿè®¡å­—ç¬¦ä¸²ä¸­æ•°å­—çš„ä¸ªæ•°
 * @param p
 * @return
 */
int digitalCount(char *p) {
    int count = 0;
    while (*p != '\0') {
        if (*p >= '0' && *p <= '9') {
            count++;
        }
        p++;
    }
    return count;
}

int main() {

    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);

    char str[] = "a12bc43hec22b68o";

    int count = digitalCount(str);

    printf("%s ä¸­æ•°å­—çš„ä¸ªæ•°æ˜¯ %d\n", str, count);

    return 0;
}
```

#### 1.3.3.5 å­—ç¬¦ä¸²æŒ‡é’ˆæ•°ç»„ä½œä¸ºå½¢å‚

* å­—ç¬¦ä¸²æŒ‡é’ˆæ•°ç»„ä½œä¸ºå‡½æ•°çš„å‚æ•°çš„æ—¶å€™ï¼Œä¼šé€€åŒ–ä¸ºæŒ‡é’ˆã€‚



* ç¤ºä¾‹ï¼š

```c {9,46}
#include <stdio.h>
#include <string.h>

/**
 * å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åº
 * @param str
 * @param len
 */
void stringSort(char *str[7], int len) {
    for (int i = 0; i < len - 1; ++i) {
        for (int j = 0; j < len - 1 - i; ++j) {
            if (strcmp(str[j], str[j + 1]) > 0) {
                char *temp = str[j];
                str[j]     = str[j + 1];
                str[j + 1] = temp;
            }
        }
    }
}

int main() {

    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);

    // å­—ç¬¦ä¸²æŒ‡é’ˆæ•°ç»„
    char *days[] = {
        "Sunday",
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday"};

    // æ•°ç»„çš„é•¿åº¦
    int len = sizeof(days) / sizeof(days[0]);

    // éå†å­—ç¬¦ä¸²æŒ‡é’ˆæ•°ç»„
    for (int i = 0; i < len; ++i) {
        printf("%s\n", days[i]);
    }

    printf("\n");

    stringSort(days, sizeof(days) / sizeof(days[0]));

    // éå†å­—ç¬¦ä¸²æŒ‡é’ˆæ•°ç»„
    for (int i = 0; i < len; ++i) {
        printf("%s\n", days[i]);
    }

    return 0;
}
```

## 1.4 å€¼ä¼ é€’çš„ä¼˜ç¼ºç‚¹

* C è¯­è¨€ä»…æœ‰`å€¼ä¼ é€’`çš„è¿™ç§è®¾è®¡å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š
  * â‘  å®‰å…¨ï¼šç”±äºä¼ é€’çš„æ˜¯å®å‚çš„å‰¯æœ¬ï¼Œæ‰€ä»¥åŸå§‹æ•°æ®ä¸ä¼šè¢«ä¿®æ”¹ã€‚è¿™æ„å‘³ç€å‡½æ•°å¯¹å‚æ•°çš„æ“ä½œä¸ä¼šå½±å“åˆ°å¤–éƒ¨çš„å˜é‡ï¼Œé¿å…äº†éé¢„æœŸçš„å‰¯ä½œç”¨ï¼Œä¿æŠ¤äº†åŸå§‹æ•°æ®ã€‚
  * â‘¡ ç®€å•ç›´è§‚æ˜“æ‡‚ç»Ÿä¸€ï¼šç›¸æ¯”è¾ƒäº C++ å¤šç§ä¼ å€¼æ–¹å¼å¹¶å­˜çš„è®¾è®¡ç†å¿µï¼ŒC è¯­è¨€ä¼ å€¼æ–¹å¼å•ä¸€ï¼Œè¿™ä½“ç°äº† C è¯­è¨€ç®€æ´ç»Ÿä¸€çš„è®¾è®¡ç†å¿µã€‚
  * â‘¢ ...
* C è¯­è¨€ä»…æœ‰`å€¼ä¼ é€’`çš„è¿™ç§è®¾è®¡å…·æœ‰ä»¥ä¸‹ç¼ºç‚¹ï¼š
  * â‘  ä¸å¤Ÿçµæ´»ï¼ŒåŠŸèƒ½å¼±å°ã€‚
  * â‘¡ ä¸€äº›å¤§å‹æ•°æ®ï¼ˆç»“æ„ä½“å˜é‡ï¼‰ä½œä¸ºå®å‚æ—¶ï¼Œå¦‚æœä»ç„¶ä¼ é€’æ‹·è´ï¼Œæ—¢å ç”¨å¤§é‡ç©ºé—´ï¼Œæ•ˆç‡ä¹Ÿå¾ˆå·®ã€‚
  * â‘¢ ...

> [!IMPORTANT]
>
> * â‘  å¯¹äºæ•°ç»„ï¼Œåœ¨ C è¯­è¨€ä¸­ï¼Œåœ¨è¿›è¡Œå‡½æ•°å‚æ•°ä¼ é€’çš„æ—¶å€™ï¼Œæ•°ç»„åä¼šè‡ªåŠ¨é€€è¿˜ä¸ºæŒ‡é’ˆï¼Œå°±æ˜¯é˜²æ­¢è¿›è¡Œå¤§é‡æ•°æ®çš„æ‹·è´ã€‚
> * â‘¡ ä½†æ˜¯ï¼Œé—æ†¾çš„æ˜¯ï¼Œåœ¨ C è¯­è¨€ä¸­ï¼Œå¯¹äºç»“æ„ä½“å˜é‡å’Œå…±ç”¨ä½“å˜é‡ï¼Œåœ¨è¿›è¡Œå‡½æ•°å‚æ•°ä¼ é€’çš„æ—¶å€™ï¼Œä¾ç„¶æ˜¯å€¼ä¼ é€’ï¼Œè¿™å°±å¯¼è‡´å¤§è§„æ¨¡æ•°æ®çš„æ‹·è´ï¼Œæ—¢å ç”¨å¤§é‡ç©ºé—´ï¼Œæ•ˆç‡ä¹Ÿå¾ˆå·®ã€‚
> * â‘¢ å¯¹äºç»“æ„ä½“å’Œå…±ç”¨ä½“ï¼Œåœ¨è¿›è¡Œå‡½æ•°å‚æ•°ä¼ é€’çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨`ç»“æ„ä½“æŒ‡é’ˆ`å’Œ`å…±ç”¨ä½“æŒ‡é’ˆ`æ¥ä¼ é€’ï¼Œä»¥å‡å°‘å¤§è§„æ¨¡æ•°æ®çš„æ‹·è´ï¼Œé™ä½å†…å­˜ç©ºé—´çš„å ç”¨ï¼Œæé«˜ç³»ç»Ÿçš„æ•ˆç‡ã€‚

## 1.5 åº”ç”¨ç¤ºä¾‹

* éœ€æ±‚ï¼šå®šä¹‰å‡½æ•°ï¼Œæ±‚ä¸€ç»´æ•°ç»„å…ƒç´ çš„æœ€å¤§å€¼ã€‚

> [!NOTE]
>
> * â‘  å‡½æ•°çš„åŸå‹æ˜¯ï¼š`int pMax(int *p,int len);` 
> * â‘¡ å‡½æ•°çš„åŠŸèƒ½ï¼šåœ¨é•¿åº¦ä¸º len ï¼Œç”± p æŒ‡å‘çš„ä¸€ç»´æ•°ç»„ä¸­æ±‚å…ƒç´ çš„æœ€å¤§å€¼ã€‚



* ç¤ºä¾‹ï¼š

```c {9,20,28}
#include <stdio.h>

/**
 * æ±‚ä¸€ç»´æ•°ç»„å…ƒç´ çš„æœ€å¤§å€¼
 * @param p
 * @param len
 * @return
 */
int pMax(int *p, int len);

int main() {

    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);
	
    // å®šä¹‰ä¸€ç»´æ•°ç»„
    int arr[] = {1, 2, 3, 43, 5, 6, 7};
	
    // è·å–ä¸€ç»´æ•°ç»„ä¸­å…ƒç´ çš„æœ€å¤§å€¼
    int max = pMax(arr, sizeof(arr) / sizeof(int));

    // arr æ•°ç»„å…ƒç´ çš„æœ€å¤§å€¼ä¸º 43
    printf("arr æ•°ç»„å…ƒç´ çš„æœ€å¤§å€¼ä¸º %d\n", max);

    return 0;
}

int pMax(int *p, int len) {
    int max = p[0];
    for (int i = 0; i < len; ++i) {
        if (max < p[i]) {
            max = p[i];
        }
    }
    return max;
}
```

## 1.6 åº”ç”¨ç¤ºä¾‹

* éœ€æ±‚ï¼šæœ‰ä¸€ä¸ª `3 Ã— 4` çš„äºŒç»´æ•°ç»„ï¼Œæ±‚æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ ä¸­çš„æœ€å¤§å€¼ã€‚

> [!TIP]
>
> ::: details ç‚¹æˆ‘æŸ¥çœ‹ ä¸ºä»€ä¹ˆå»ºè®®ä½¿ç”¨`å¯å˜é•¿æ•°ç»„`çš„å½¢å¼ä½œä¸ºå‚æ•°ï¼Ÿ
>
> ```c
> /**
> * ä¸ä½¿ç”¨å˜é•¿æ•°ç»„(VLA)ä½œä¸ºå‚æ•°ï¼Œå¿…é¡»æºå¸¦åˆ—æ•°ï¼Œä¸”åˆ—æ•°å¿…é¡»æ˜¯æ•°å­—ï¼ï¼ï¼
> * n ï¼šç¬¬ä¸€ç»´çš„é•¿åº¦
> * 4 ï¼šæ˜¯åˆ—æ•°
> */
> int pMax(int array[][4], int n) {
>     ...
> } 
> ```
>
> ```c
> /**
> * ä½¿ç”¨å˜é•¿æ•°ç»„(VLA)ä½œä¸ºå‚æ•°ï¼Œæ›´åŠ é€šç”¨ï¼ï¼ï¼
> * äºŒç»´æ•°ç»„ä¸­çš„è¡Œå’Œåˆ—å¯ä»¥æ ¹æ®å®å‚åŠ¨æ€å¼€è¾Ÿã€‚
> */
> int pMax(int rows, int cols, int arr[rows][cols]) {
>     ...
> }
> ```
> :::



* ç¤ºä¾‹ï¼š

```c {10,31}
#include <stdio.h>

/**
 * ä½¿ç”¨å˜é•¿æ•°ç»„(VLA) åŠ¨æ€æ¥æ”¶åˆ—æ•°
 * @param rows è¡Œ
 * @param cols åˆ—
 * @param arr æ•°ç»„å
 * @return 
 */
int pMax(int rows, int cols, int arr[rows][cols]) {
    int max = arr[0][0]; 
    for (int i = 0; i < rows; ++i) {
        for (int j = 0; j < cols; ++j) {
            if (arr[i][j] > max) {
                max = arr[i][j];
            }
        }
    }
    return max;
}

int main() {
    // å®šä¹‰äºŒç»´æ•°ç»„
    int arr[3][4] = {{1, 2, 3, 4}, {5, 6, 7, 8}, {9, 10, 11, 12}};

    // è·å–æ•°ç»„çš„è¡Œå’Œåˆ—
    int rows = sizeof(arr) / sizeof(arr[0]);
    int cols = sizeof(arr[0]) / sizeof(arr[0][0]);

    // è·å–äºŒç»´æ•°ç»„ä¸­å…ƒç´ çš„æœ€å¤§å€¼
    int max = pMax(rows, cols, arr);

    // æ‰“å°æœ€å¤§å€¼
    printf("max = %d\n", max);

    return 0;
}
```



# ç¬¬äºŒç« ï¼šé€’å½’å‡½æ•°ï¼ˆâ­ï¼‰

## 2.1 æ¦‚è¿°

* `é€’å½’`åœ¨ç”Ÿæ´»ä¸­çš„ä¸¾ä¾‹ï¼š

```txt
ä»å‰æœ‰åº§å±±,å±±ä¸Šæœ‰åº§åº™,åº™é‡Œæœ‰ä¸ªè€å’Œå°š,è€å’Œå°šåœ¨ç»™å°å’Œå°šè®²æ•…äº‹,è®²çš„å•¥?
     ä»å‰æœ‰åº§å±±,å±±ä¸Šæœ‰åº§åº™,åº™é‡Œæœ‰ä¸ªè€å’Œå°š,è€å’Œå°šåœ¨ç»™å°å’Œå°šè®²æ•…äº‹,è®²çš„å•¥?
         ä»å‰æœ‰åº§å±±,å±±ä¸Šæœ‰åº§åº™,åº™é‡Œæœ‰ä¸ªè€å’Œå°š,è€å’Œå°šåœ¨ç»™å°å’Œå°šè®²æ•…äº‹,è®²çš„å•¥?
             ä»å‰æœ‰åº§å±±,å±±ä¸Šæœ‰åº§åº™,åº™é‡Œæœ‰ä¸ªè€å’Œå°š,è€å’Œå°šåœ¨ç»™å°å’Œå°šè®²æ•…äº‹,è®²çš„å•¥?...
   ...
è€å’Œå°šæ²¡äº†,åº™å¡Œäº†,å°å’Œå°šè¿˜ä¿—ç»“å©šäº†ã€‚
```

* `é€’å½’å‡½æ•°`è°ƒç”¨ï¼šå‡½æ•°è‡ªå·±è°ƒç”¨è‡ªå·±çš„ç°è±¡å°±ç§°ä¸º`é€’å½’`ã€‚

> [!NOTE]
>
> ::: details ç‚¹æˆ‘æŸ¥çœ‹ å¦‚ä½•ç†è§£`é€’å½’`ï¼Ÿ
>
> å¯ä»¥å°†`é€’å½’`ï¼Œæ‹†åˆ†ä¸º`é€’`å’Œ`å½’`æ¥ç†è§£ï¼ˆå…¶å®ï¼Œå°±æ˜¯æ•°æ®ç»“æ„å’Œç®—æ³•ä¸­çš„`åˆ†æ²»æ³•`ï¼š`åˆ†`æ˜¯`åˆ†è§£é—®é¢˜`çš„æ„æ€ï¼Œ`æ²»`æ˜¯`è§£å†³å’Œåˆå¹¶`çš„æ„æ€ï¼‰ï¼š
>
> * â‘  `é€’å½’`ä¸­çš„`é€’`å°±æ˜¯`é€’æ¨`æˆ–`åˆ†è§£`çš„æ„æ€ï¼Œå³ï¼šå°†ä¸€ä¸ªè¾ƒå¤§è§„æ¨¡çš„é—®é¢˜é€æ­¥åˆ†è§£æˆè¾ƒå°çš„ã€æ›´å®¹æ˜“å¤„ç†çš„å­é—®é¢˜ã€‚
> * â‘¡ `é€’å½’`ä¸­çš„`å½’`å°±æ˜¯`è¿”å›`æˆ–`å›é¡¾`çš„æ„æ€ï¼Œå³ï¼šå½“è§£å†³äº†è¿™äº›å­é—®é¢˜åï¼Œä¼šä»æœ€åº•å±‚å¼€å§‹ï¼Œé€æ­¥åˆå¹¶æˆ–ç»„åˆè¿™äº›å­é—®é¢˜çš„ç­”æ¡ˆï¼Œç›´åˆ°å¾—å‡ºæœ€åˆé—®é¢˜çš„ç­”æ¡ˆã€‚
>
> :::

## 2.2 é€’å½’çš„åˆ†ç±»åŠå…¶ä¸‰è¦ç´ 

* `é€’å½’`å¯ä»¥åˆ†ä¸º`ç›´æ¥é€’å½’`å’Œ`é—´æ¥é€’å½’`ã€‚

> [!NOTE]
>
> * â‘  ç›´æ¥é€’å½’ï¼šå‡½æ•°è‡ªèº«è°ƒç”¨è‡ªå·±ã€‚
>
> ::: details ç‚¹æˆ‘æŸ¥çœ‹ ç›´æ¥é€’å½’
>
> ```c
> int func(int a){
>  int b,c;
>  ...
>  int c = func(b);
>  ...
> }
> ```
>
> :::
>
> * â‘¡ é—´æ¥é€’å½’ï¼šå¯ä»¥ç†è§£ä¸º `A()` å‡½æ•°è°ƒç”¨ `B()` å‡½æ•°ï¼Œ`B()` å‡½æ•°è°ƒç”¨ `C()` å‡½ æ•°ï¼Œ`C()` å‡½æ•°è°ƒç”¨ `A()` å‡½æ•°ã€‚
>
> ::: details ç‚¹æˆ‘æŸ¥çœ‹ é—´æ¥é€’å½’
>
> ```c
> void A(){
> B();
> }
> 
> void B(){
> C();
> }
> 
> void C(){
> A();
> }
> ```
>
> :::


* è¦åˆç†çš„ä½¿ç”¨`é€’å½’`è§£å†³å®é™…é—®é¢˜ï¼Œéœ€è¦`æ³¨æ„`é€’å½’çš„`ä¸‰è¦ç´ `ã€‚


> [!CAUTION]
>
> ::: details ç‚¹æˆ‘æŸ¥çœ‹ é€’å½’çš„ä¸‰è¦ç´ 
>
> * â‘  `é€’å½’ä½“`ï¼ˆä½“ç°`é€’`çš„è¿‡ç¨‹ï¼‰ï¼š
>   * å‡½æ•°å†…éƒ¨é€’å½’è°ƒç”¨è‡ªèº«çš„éƒ¨åˆ†ã€‚
>   * é€’å½’ä½“å¼é€’å½’æ€ç»´çš„æ ¸å¿ƒï¼šå®ƒè¡¨ç¤ºå¦‚ä½•å°†ä¸€ä¸ªå¤§è§„æ¨¡çš„é—®é¢˜`é€’æ¨`ä¸ºè¾ƒå°çš„ã€ç›¸ä¼¼çš„å­é—®é¢˜ã€‚è¿™ä¸€åˆ†è§£è¿‡ç¨‹æŒç»­çš„ç¼©å°é—®é¢˜çš„è§„æ¨¡ï¼Œä»¥ä¾¿æ›´åŠ æ–¹ä¾¿å’Œå®¹æ˜“çš„å¤„ç†é—®é¢˜ã€‚
> * â‘¡ `é€’å½’çš„å‡ºå£`ï¼ˆä½“ç°`å½’`çš„è¿‡ç¨‹ï¼‰ï¼š
>   * å½“å­é—®é¢˜å·²ç»è¶³å¤Ÿå°æˆ–è€…æ»¡è¶³æŸç§æ¡ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¸å†ç»§ç»­åˆ†è§£ï¼Œè€Œæ˜¯å¼€å§‹è¿”å›ç­”æ¡ˆã€‚å…¶ä¸­ï¼Œè¿™äº›æ¡ä»¶æˆ–æŸç§æ¡ä»¶å°±æ˜¯é€’å½’çš„å‡ºå£ã€‚
>   * æ˜ç¡®çš„é€’å½’å‡ºå£æ˜¯è‡³å…³é‡è¦çš„ã€‚å¦‚æœæ²¡æœ‰æ˜ç¡®çš„å‡ºå£ï¼Œé€’å½’å°†å¯èƒ½æ— é™è¿›è¡Œï¼ˆç±»ä¼¼äºæ­»å¾ªç¯ï¼‰ï¼Œç›´åˆ°è€—å°½èµ„æºå¹¶å¯¼è‡´æ ˆæº¢å‡ºã€‚é€šè¿‡é€’å½’çš„å‡ºå£ï¼Œæˆ‘ä»¬å®ç°ä»`é€’`åˆ°`å½’`çš„è½¬æ¢ï¼Œå¹¶å¼€å§‹é€æ­¥åˆå¹¶æˆ–ç»„åˆå­é—®é¢˜çš„ç­”æ¡ˆã€‚
>
> * â‘¢ `é€’å½’çš„æ·±åº¦`ï¼š
>   * æ¯æ¬¡é€’å½’è°ƒç”¨éƒ½ä¼šåŠ æ·±è°ƒç”¨çš„å±‚æ¬¡ï¼Œè¿™å¯ä»¥è¢«çœ‹ä½œæ˜¯é€’å½’ä¸­`é€’`çš„æ·±åº¦ã€‚
>   * æ§åˆ¶é€’å½’æ·±åº¦æ˜¯è‡³å…³é‡è¦çš„ã€‚å› ä¸ºä¸€ä¸ªè¿‡æ·±çš„é€’å½’ä¸ä»…ä¼šå¢åŠ è®¡ç®—çš„å¤æ‚æ€§ï¼Œè¿˜å¯èƒ½ä¼šå¯¼è‡´æ ˆæº¢å‡ºã€‚åˆç†çš„æ·±åº¦èƒ½å¤Ÿç¡®ä¿æˆ‘ä»¬åœ¨`é€’`çš„è¿‡ç¨‹ä¸­ä¸ä¼šè¿‡åˆ†æ·±å…¥ï¼ŒåŒæ—¶åœ¨`å½’`çš„è¿‡ç¨‹ä¸­èƒ½å¤Ÿæœ‰æ•ˆçš„è¿”å›å’Œç»„åˆç­”æ¡ˆã€‚
>
> :::

## 2.3 åº”ç”¨ç¤ºä¾‹

* éœ€æ±‚ï¼šè®¡ç®— 1 - n çš„å’Œã€‚



* ç¤ºä¾‹ï¼šä¸ä½¿ç”¨é€’å½’å‡½æ•°

```c
#include <stdio.h>

/**
 * æ±‚ 1 - n çš„å’Œ
 * @param n
 * @return å’Œ
 */
int sum(int n) {
    int total = 0;
    for (int i = 1; i <= n; ++i) {
        total += i;
    }
    return total;
}

int main() {

    int n = 5;

    printf("sum(%d) = %d\n", n, sum(n)); // sum(5) = 15

    return 0;
}
```



* ç¤ºä¾‹ï¼šä½¿ç”¨é€’å½’å‡½æ•°

```c
#include <stdio.h>

/**
 * æ±‚ 1 - n çš„å’Œ
 * @param n
 * @return å’Œ
 */
int sum(int n) { // n å°±æ˜¯é€’å½’çš„æ·±åº¦
    // å½“ n == 1 çš„æ—¶å€™ï¼Œè¿”å› 1
    if (n == 1) { // é€’å½’å‡ºå£
        return 1;
    }
    // é€’å½’æƒ…å†µï¼šå°† n å’Œ n - 1 çš„å’Œç›¸åŠ 
    return n + sum(n - 1);  // é€’å½’ä½“
}

int main() {

    int n = 5;

    printf("sum(%d) = %d\n", n, sum(n)); // sum(5) = 15

    return 0;
}
```

## 2.4 é€’å½’è°ƒç”¨è¿‡ç¨‹

* ä»¥ä¸Šé¢çš„é€’å½’å‡½æ•°ä¸ºä¾‹ï¼Œå…¶åœ¨å†…å­˜ä¸­æ˜¯è¿™æ ·çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![](./assets/4.svg)

## 2.5 åº”ç”¨ç¤ºä¾‹

* éœ€æ±‚ï¼šä½¿ç”¨é€’å½’å‡½æ•°è·å–é˜¶ä¹˜ `n!`  çš„ç»“æœã€‚

> [!NOTE]
>
> * â‘  å½“ n = 0 æˆ– 1 çš„æ—¶å€™ï¼Œn! çš„ç»“æœæ˜¯ 1 ã€‚
> * â‘¡ å½“ n > 1 çš„æ—¶å€™ï¼Œn! = n Ã— (n-1)! ã€‚



* ç¤ºä¾‹ï¼š

```c
#include <stdio.h>

/**
 * é€’å½’å‡½æ•°ï¼Œè®¡ç®— n çš„é˜¶ä¹˜
 * @param n
 * @return é˜¶ä¹˜
 */
int factorial(int n) {
    // å½“ n == 0 æˆ– 1 çš„æ—¶å€™ï¼Œè¿”å› 1
    if (n == 0 || n == 1) {
        return 1;
    }
    // é€’å½’è°ƒç”¨
    // n * (n - 1) çš„é˜¶ä¹˜
    return n * factorial(n - 1);
}

int main() {

    int n = 5;

    printf("%d çš„é˜¶ä¹˜æ˜¯ %d\n", n, factorial(n)); // 5 çš„é˜¶ä¹˜æ˜¯ 120

    return 0;
}
```

## 2.6 åº”ç”¨ç¤ºä¾‹

* éœ€æ±‚ï¼šè®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆFibonacciï¼‰çš„ç¬¬ n ä¸ªå€¼ã€‚

> [!NOTE]
>
> * â‘  æ–æ³¢é‚£å¥‘æ•°åˆ—æ»¡è¶³çš„è§„åˆ™æ˜¯ï¼š`1,1,2,3,5,8,13,21,34,55,....`ï¼Œå³ï¼šå‰ä¸¤ä¸ªæ•°éƒ½æ˜¯ 1 ï¼Œä»ç¬¬ä¸‰ä¸ªæ•°å¼€å§‹ï¼Œæ¯ä¸ªæ•°ç­‰äºå‰ä¸¤ä¸ªæ•°ä¹‹å’Œã€‚
> * â‘¡ å‡è®¾ f(n) ä»£è¡¨æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬ n ä¸ªå€¼ï¼Œé‚£ä¹ˆ f(n) æ»¡è¶³ï¼š f(n) = f(n-2) + f(n-1); å…¶ä¸­ï¼Œn >= 3ã€‚



* ç¤ºä¾‹ï¼š

```c
#include <stdio.h>

/**
 * é€’å½’å‡½æ•°ï¼Œè®¡ç®—ç¬¬ n ä¸ªæ–æ³¢é‚£å¥‘æ•°
 * @param n
 * @return ç¬¬ n ä¸ªæ–æ³¢é‚£å¥‘æ•°
 */
int fib(int n) {
    if (n == 1 || n == 2) {
        return 1;
    }
    return fib(n - 1) + fib(n - 2);
}

int main() {

    int n = 1;
    printf("ç¬¬ %d ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ %d\n", n, fib(n)); // ç¬¬ 1 ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ 1
    n = 2;
    printf("ç¬¬ %d ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ %d\n", n, fib(n)); // ç¬¬ 2 ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ 1
    n = 3;
    printf("ç¬¬ %d ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ %d\n", n, fib(n)); // ç¬¬ 3 ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ 2
    n = 4;
    printf("ç¬¬ %d ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ %d\n", n, fib(n)); // ç¬¬ 4 ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ 3
    n = 5;
    printf("ç¬¬ %d ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ %d\n", n, fib(n)); // ç¬¬ 5 ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ 5
    n = 6;
    printf("ç¬¬ %d ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ %d\n", n, fib(n)); // ç¬¬ 6 ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ 8

    return 0;
}
```

## 2.7 åº”ç”¨ç¤ºä¾‹

* éœ€æ±‚ï¼šæœ‰ 5 ä¸ªå­¦ç”Ÿååœ¨ä¸€èµ·ï¼Œé—®ç¬¬ 5 ä¸ªå­¦ç”Ÿå¤šå°‘å²ï¼Œä»–è¯´æ¯”ç¬¬ 4 ä¸ªå­¦ç”Ÿå¤§ 2 å²ã€‚é—®ç¬¬ 4 ä¸ªå­¦ç”Ÿå²æ•°ï¼Œä»–è¯´æ¯”ç¬¬ 3 ä¸ªå­¦ç”Ÿå¤§ 2 å²ã€‚é—®ç¬¬ 3 ä¸ªå­¦ç”Ÿï¼Œåˆè¯´æ¯”ç¬¬ 2 ä¸ªå­¦ç”Ÿå¤§ 2 å²ã€‚é—®ç¬¬ 2 ä¸ªå­¦ç”Ÿï¼Œè¯´æ¯”ç¬¬ 1 ä¸ªå­¦ç”Ÿå¤§ 2 å²ã€‚æœ€åé—®ç¬¬ 1 ä¸ªå­¦ç”Ÿï¼Œä»–è¯´æ˜¯ 10 å²ã€‚è¯·é—®ç¬¬ 5 ä¸ªå­¦ç”Ÿå¤šå¤§ï¼Ÿ

> [!NOTE]
>
> * â‘  å½“ n = 1 çš„æ—¶å€™ï¼Œage(n) = 10ã€‚
> * â‘¡ å½“ n > 1 çš„æ—¶å€™ï¼Œage(n) = age(n-1) + 2ã€‚



* ç¤ºä¾‹ï¼š

```c
#include <stdio.h>

/**
 * å®šä¹‰é€’å½’å‡½æ•°ï¼Œè·å–ç¬¬ n ä¸ªå­¦ç”Ÿçš„å¹´é¾„
 * @param n
 * @return
 */
int age(int n) {
    if (n == 1) {
        return 10;
    } else {
        return age(n - 1) + 2;
    }
}

int main() {

    int n = 5;

    printf("ç¬¬ %d ä¸ªå­¦ç”Ÿçš„å¹´é¾„æ˜¯ %d\n", n, age(n)); // ç¬¬ 5 ä¸ªå­¦ç”Ÿçš„å¹´é¾„æ˜¯ 18

    return 0;
}

```

## 2.8 åº”ç”¨ç¤ºä¾‹

* éœ€æ±‚ï¼šå‡å¦‚æœ‰ 10 é˜¶æ¥¼æ¢¯ï¼Œå°æœ‹å‹æ¯æ¬¡åªèƒ½å‘ä¸Šèµ° 1 é˜¶æˆ–è€… 2 é˜¶ï¼Œè¯·é—®å¯¹äº n é˜¶å°é˜¶ ä¸€å…±æœ‰å¤šå°‘ç§ä¸åŒçš„èµ°æ³•å‘¢ï¼Ÿ

> [!NOTE]
>
> * é˜¶æ•°å’Œèµ°æ³•çš„å…³ç³»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
>   * é˜¶æ•°ï¼š1 2 3 4 ã€‚
>   * èµ°æ³•ï¼š1 2 3 5ã€‚
>
> * å…¬å¼æ˜¯ï¼šfun(n) = fun(n - 1) + fun(n - 2) ã€‚



* ç¤ºä¾‹ï¼š

```c
#include <stdio.h>

/**
 * å®šä¹‰é€’å½’å‡½æ•°ï¼Œè·å–ç¬¬ n é˜¶å°é˜¶çš„ä¸åŒçš„èµ°æ³•
 * @param n
 * @return
 */
int moves(int n) {
    if (n == 1) {
        return 1;
    }

    if (n == 2) {
        return 2;
    }

    return moves(n - 1) + moves(n - 2);
}

int main() {

    int n = 4;

    // ç¬¬ 4 é˜¶å°é˜¶çš„èµ°æ³•æœ‰ 5 ç§
    printf("ç¬¬ %d é˜¶å°é˜¶çš„èµ°æ³•æœ‰ %d ç§\n", n, moves(n)); 

    return 0;
}
```

## 2.9 é€’å½’å‡½æ•°çš„è‡´å‘½ç¼ºé™·

### 2.9.1 é€’å½’å‡½æ•°çš„ç©ºé—´å¼€é”€

* åœ¨ç¨‹åºå ç”¨çš„æ•´ä¸ªå†…å­˜ä¸­ï¼Œæœ‰ä¸€å—å†…å­˜åŒºåŸŸå«åšæ ˆï¼ˆStackï¼‰ï¼Œå®ƒæ˜¯ä¸“é—¨ç”¨æ¥ç»™å‡½æ•°åˆ†é…å†…å­˜çš„ï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°ï¼Œéƒ½ä¼šå°†ç›¸å…³æ•°æ®å‹å…¥æ ˆä¸­ï¼ŒåŒ…æ‹¬ï¼šå±€éƒ¨å˜é‡ã€å±€éƒ¨æ•°ç»„ã€å½¢å‚ã€å¯„å­˜å™¨ã€å†—ä½™æ•°æ®ç­‰ã€‚
* æ ˆæ˜¯é’ˆå¯¹çº¿ç¨‹æ¥è¯´çš„ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰ä¸€ä¸ªæ ˆï¼Œå¦‚æœä¸€ä¸ªç¨‹åºåŒ…å«äº†å¤šä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆå®ƒå°±æ‹¥æœ‰å¤šä¸ªæ ˆã€‚

> [!NOTE]
>
> ç›®å‰æˆ‘ä»¬ç¼–å†™çš„ç¨‹åºéƒ½æ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥ä¸å¿…è€ƒè™‘å¤šçº¿ç¨‹çš„æƒ…å†µã€‚

* å¯¹æ¯ä¸ªçº¿ç¨‹æ¥è¯´ï¼Œæ ˆèƒ½ä½¿ç”¨çš„å†…å­˜æ˜¯æœ‰é™çš„ï¼Œä¸€èˆ¬æ˜¯ 1M~8Mï¼Œè¿™åœ¨ç¼–è¯‘æ—¶å°±å·²ç»å†³å®šäº†ï¼Œç¨‹åºè¿è¡ŒæœŸé—´ä¸èƒ½å†æ”¹å˜ã€‚å¦‚æœç¨‹åºä½¿ç”¨çš„æ ˆå†…å­˜è¶…å‡ºæœ€å¤§å€¼ï¼Œå°±ä¼šå‘ç”Ÿæ ˆæº¢å‡ºï¼ˆStack Overflowï¼‰é”™è¯¯ã€‚

> [!NOTE]
>
> * â‘  æ ˆå†…å­˜çš„å¤§å°å’Œç¼–è¯‘å™¨æœ‰å…³ï¼Œç¼–è¯‘å™¨ä¼šä¸ºæ ˆå†…å­˜æŒ‡å®šä¸€ä¸ªæœ€å¤§å€¼ï¼Œåœ¨ Linux GCC ä¸‹ï¼Œé»˜è®¤æ˜¯ 8Mã€‚
> * â‘¡ æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å‚æ•°æ¥ä¿®æ”¹æ ˆå†…å­˜çš„å¤§å°ã€‚

* å‘ç”Ÿå‡½æ•°è°ƒç”¨æ—¶ä¼šå°†ç›¸å…³æ•°æ®å‹å…¥æ ˆä¸­ï¼Œå‡½æ•°è°ƒç”¨ç»“æŸä¼šé‡Šæ”¾è¿™ä¸€éƒ¨åˆ†å†…å­˜ï¼Œå¯¹äºä¸€èˆ¬çš„å‡½æ•°æ¥è¯´ï¼Œè¿™ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯å¯¹äºé€’å½’å‡½æ•°ï¼Œè¿™ä¼šå¯¼è‡´ä¸¥é‡çš„é—®é¢˜ï¼ï¼ï¼

> [!NOTE]
>
> * â‘  é€’å½’å‡½æ•°å†…éƒ¨åµŒå¥—äº†å¯¹è‡ªèº«çš„è°ƒç”¨ï¼Œé™¤éç­‰åˆ°æœ€å†…å±‚çš„å‡½æ•°è°ƒç”¨ç»“æŸï¼Œå¦åˆ™å¤–å±‚çš„æ‰€æœ‰å‡½æ•°éƒ½ä¸ä¼šè°ƒç”¨ç»“æŸã€‚é€šä¿—åœ°è®²ï¼Œå¤–å±‚å‡½æ•°è¢«å¡ä½äº†ï¼Œå®ƒè¦ç­‰å¾…æ‰€æœ‰çš„å†…å±‚å‡½æ•°è°ƒç”¨å®Œæˆåï¼Œå®ƒè‡ªå·±æ‰èƒ½è°ƒç”¨å®Œæˆã€‚
> * â‘¡ æ¯ä¸€å±‚çš„é€’å½’è°ƒç”¨éƒ½ä¼šåœ¨æ ˆä¸Šåˆ†é…ä¸€å—å†…å­˜ï¼Œæœ‰å¤šå°‘å±‚é€’å½’è°ƒç”¨å°±åˆ†é…å¤šå°‘å—ç›¸ä¼¼çš„å†…å­˜ï¼Œæ‰€æœ‰å†…å­˜åŠ èµ·æ¥çš„æ€»å’Œæ˜¯ç›¸å½“ææ€–çš„ï¼Œå¾ˆå®¹æ˜“è¶…è¿‡æ ˆå†…å­˜çš„å¤§å°é™åˆ¶ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå¯¼è‡´ç¨‹åºå´©æºƒã€‚



* ç¤ºä¾‹ï¼šæ¼”ç¤ºç”±äºæ ˆæº¢å‡ºè€Œå¯¼è‡´ç¨‹åºå´©æºƒ

```c
#include <stdio.h>

long sum(int n) {
    // ä¸ºäº†å¢åŠ æ¯æ¬¡å‡½æ•°è°ƒç”¨çš„å†…å­˜ï¼Œé¢å¤–å¢åŠ äº†ä¸€ä¸ªæ— ç”¨çš„æ•°ç»„ï¼Œå®ƒå ç”¨ 1KB çš„å†…å­˜
    int arr[250];

    if (n <= 1) {
        return n;
    } else {
        return  n + sum(n-1);
    }
}

int main() {
    printf("ä»1åŠ åˆ°1000çš„å€¼ä¸º %ld\n", sum(1000));
    return 0;
}
```

### 2.9.2 é€’å½’å‡½æ•°çš„æ—¶é—´å¼€é”€

* æ¯æ¬¡è°ƒç”¨å‡½æ•°éƒ½ä¼šåœ¨æ ˆä¸Šåˆ†é…å†…å­˜ï¼Œå‡½æ•°è°ƒç”¨ç»“æŸåå†é‡Šæ”¾è¿™ä¸€éƒ¨åˆ†å†…å­˜ï¼Œå†…å­˜çš„åˆ†é…å’Œé‡Šæ”¾éƒ½æ˜¯éœ€è¦æ—¶é—´çš„ã€‚
* æ¯æ¬¡è°ƒç”¨å‡½æ•°è¿˜ä¼šå¤šæ¬¡ä¿®æ”¹å¯„å­˜å™¨çš„å€¼ï¼Œå‡½æ•°è°ƒç”¨ç»“æŸåè¿˜éœ€è¦æ‰¾åˆ°ä¸Šå±‚å‡½æ•°çš„ä½ç½®å†ç»§ç»­æ‰§è¡Œï¼Œè¿™ä¹Ÿæ˜¯éœ€è¦æ—¶é—´çš„ã€‚

> [!NOTE]
>
> * â‘  ä½¿ç”¨é€’å½’å‡½æ•°è®¡ç®—æ–æ³¢é‚£å¥‘æ•°ï¼Œä¼šå­˜åœ¨å¤§é‡çš„é‡å¤è®¡ç®—ã€‚
>
> ::: details ç‚¹æˆ‘æŸ¥çœ‹
>
> ![](./assets/7.png)
>
> :::
>
> * â‘¡ è¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(2â¿)`ï¼Œéšç€ n çš„å¢åŠ ï¼Œæ‰€éœ€æ—¶é—´å°†æ€¥å‰§å¢åŠ ï¼Œå¯¼è‡´ç®—æ³•éå¸¸ä½æ•ˆã€‚



* ç¤ºä¾‹ï¼š

```c
#include <stdio.h>
#include <time.h>

// é€’å½’è®¡ç®—æ–æ³¢é‚£å¥‘æ•°
long fib(int n) {
    if (n <= 2) {
        return 1;
    } else {
        return fib(n - 1) + fib(n - 2);
    }
}

int main() {
    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);

    int a;
    clock_t time_start, time_end;

    printf("è¯·è¾“å…¥æ­£æ•´æ•°: ");
    scanf("%d", &a);
    time_start = clock();
    // Fib(50) = 12586269025
    printf("Fib(%d) = %ld\n", a, fib(a));
    time_end = clock();
    // æ—¶é—´: 45.122685s
    printf("æ—¶é—´: %lfs\n", (double)(time_end - time_start) / CLOCKS_PER_SEC);

    return 0;
}
```

### 2.9.3 ä½¿ç”¨è¿­ä»£æ¥ä»£æ›¿é€’å½’å‡½æ•°

* â‘  è™½ç„¶ä½¿ç”¨é€’å½’å‡½æ•°å¤§å¤§ç®€åŒ–äº†ç®—æ³•çš„ç¼–å†™ï¼Œä½†æ˜¯é€’å½’è°ƒç”¨ä¼šå ç”¨å¤§é‡çš„ç³»ç»Ÿå †æ ˆï¼Œå†…å­˜è€—ç”¨å¤šï¼Œåœ¨é€’å½’è°ƒç”¨å±‚æ¬¡å¤šæ—¶é€Ÿåº¦è¦æ¯”å¾ªç¯æ…¢çš„å¤šï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨é€’å½’æ—¶è¦æ…é‡ã€‚
* â‘¡ åœ¨è¦æ±‚é«˜æ€§èƒ½çš„æƒ…å†µä¸‹å°½é‡é¿å…ä½¿ç”¨é€’å½’ï¼Œé€’å½’è°ƒç”¨æ—¢èŠ±æ—¶é—´åˆè€—å†…å­˜ã€‚
* â‘¢ å¯ä»¥è€ƒè™‘ä½¿ç”¨`å¾ªç¯è¿­ä»£`æ¥ä»£æ›¿é€’å½’è°ƒç”¨ï¼ˆä¸é€’å½’å‡½æ•°ç›¸æ¯”ï¼Œè¿­ä»£ä¸ä½†æ²¡æœ‰é¢å¤–çš„å†…å­˜å¼€é”€ï¼Œä¹Ÿæ²¡æœ‰é¢å¤–çš„æ—¶é—´å¼€é”€ï¼‰ã€‚

> [!NOTE]
>
> ä½¿ç”¨`å¾ªç¯è¿­ä»£`(`O(n)`)è®¡ç®—`æ–æ³¢é‚£å¥‘æ•°åˆ—`çš„æ•ˆç‡ï¼Œæ¯”ä½¿ç”¨`é€’å½’è°ƒç”¨`(`O(2â¿)`)è®¡ç®—`æ–æ³¢é‚£å¥‘æ•°åˆ—`è¦é«˜å¾ˆå¤šã€‚



* ç¤ºä¾‹ï¼š

```c
#include <stdio.h>

/**
 * ä½¿ç”¨å¾ªç¯æ¥è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—
 * @param n
 * @return
 */
int fib(int n) {

    // å‡ºå£æ¡ä»¶
    if (n == 1 || n == 2) {
        return 1;
    }

    // åˆè¯†æ¡ä»¶ a ï¼Œå¯¹åº”çš„æ˜¯ fib(1)
    int a = 1;
    // åˆè¯†æ¡ä»¶ b ï¼Œå¯¹åº”çš„æ˜¯ fib(2)
    int b = 1;
    for (int i = 3; i <= n; ++i) { // ä» 3 å¼€å§‹ï¼Œå› ä¸º 1 å’Œ 2 å·²ç»è¢«è®¡ç®—è¿‡äº†
        // è®¡ç®—å½“å‰æ–æ³¢é‚£å¥‘æ•°ï¼Œå³ï¼šfib(n) = fib(n-1) + fib(n-2)
        // a è¡¨ç¤ºå‰ä¸¤ä¸ªæ–æ³¢é‚£å¥‘æ•°è¾ƒå°çš„ï¼Œå³ï¼šfib(n-2)
        // b è¡¨ç¤ºå‰ä¸¤ä¸ªæ–æ³¢é‚£å¥‘æ•°è¾ƒå¤§çš„ï¼Œå³ï¼šfib(n-1)
        int temp = a + b;
        // æ›´æ–° a å’Œ b çš„å€¼ï¼Œä¸ºè®¡ç®—ä¸‹ä¸€ä¸ªæ–æ³¢é‚£å¥‘æ•°åšå‡†å¤‡
        // ç°åœ¨çš„ bï¼Œå³ i - 1 é¡¹ï¼Œå˜ä¸ºäº†æ–°çš„ a ï¼Œå³æ–°çš„ i-2 é¡¹
        a = b;
        // å½“å‰è®¡ç®—å‡ºçš„æ–æ³¢é‚£å¥‘æ•° tempï¼Œå˜ä¸ºäº†æ–°çš„ b ï¼Œå³æ–°çš„ i-1 é¡¹
        b = temp;
    }

    return b;
}

int main() {

    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);

    int n = 1;
    printf("ç¬¬ %d ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ %d\n", n, fib(n)); // ç¬¬ 1 ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ 1
    n = 2;
    printf("ç¬¬ %d ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ %d\n", n, fib(n)); // ç¬¬ 2 ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ 1
    n = 3;
    printf("ç¬¬ %d ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ %d\n", n, fib(n)); // ç¬¬ 3 ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ 2
    n = 4;
    printf("ç¬¬ %d ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ %d\n", n, fib(n)); // ç¬¬ 4 ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ 3
    n = 5;
    printf("ç¬¬ %d ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ %d\n", n, fib(n)); // ç¬¬ 5 ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ 5
    n = 6;
    printf("ç¬¬ %d ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ %d\n", n, fib(n)); // ç¬¬ 6 ä¸ªæ–æ³¢é‚£å¥‘æ•°æ˜¯ 8

    return 0;
}
```

## 2.10 æ±‰è¯ºå¡”

* æœ‰ä¸‰æ ¹æ†å­ Aã€Bã€Cï¼Œåœ¨ä¸Šé¢æœ‰ N ï¼ˆN>=1ï¼‰ä¸ªç©¿å­”åœ†ç›˜ï¼Œç›˜çš„å°ºå¯¸ç”±ä¸‹åˆ°ä¸Šä¾æ¬¡å˜å°ã€‚

![](./assets/8.png)

* éœ€è¦æŒ‰ä¸‹åˆ—è§„åˆ™å°†æ‰€æœ‰åœ†ç›˜ç§»åŠ¨åˆ° C æ†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
  * â‘  æ¯æ¬¡åªèƒ½ç§»åŠ¨ä¸€ä¸ªåœ†ç›˜ã€‚
  * â‘¡ å¤§ç›˜ä¸èƒ½å åœ¨å°ç›˜ä¸Šé¢ã€‚

> [!NOTE]
>
> å¯ä»¥å°†åœ†ç›˜ä¸´æ—¶ç½®äº B æ†ï¼Œä¹Ÿå¯ä»¥å°†ä» A æ†ç§»é™¤çš„åœ†ç›˜é‡æ–°ç§»å›åˆ° A æ†ï¼›ä½†æ˜¯ï¼Œå¿…é¡»éµå¾ªä¸Šé¢çš„ä¸¤æ¡è§„åˆ™ã€‚

* é—®ï¼šè‡³å°‘éœ€è¦ç§»åŠ¨å¤šå°‘æ¬¡ï¼Ÿå¦‚ä½•ç§»åŠ¨ï¼Ÿ

> [!NOTE]
>
> * å¦‚æœ N = 1ï¼ˆâ‘ ï¼‰ï¼Œé‚£ä¹ˆåªéœ€è¦ç§»åŠ¨ 1 æ¬¡ï¼Œå³ï¼šA -â‘ -> C ã€‚
>
> ::: details ç‚¹æˆ‘æŸ¥çœ‹
>
> ![](./assets/9.gif)
>
> :::
>
> * å¦‚æœ N = 2ï¼ˆâ‘ ã€â‘¡ï¼‰ï¼Œé‚£ä¹ˆå°±éœ€è¦ 3 æ¬¡ï¼Œå³ï¼šA -â‘ -> B ã€A -â‘¡-> Cã€B -â‘ -> C ã€‚
>
> ::: details ç‚¹æˆ‘æŸ¥çœ‹
>
> ![](./assets/10.gif)
>
> :::
>
> * å¦‚æœ N = 3ï¼ˆâ‘ ã€â‘¡ã€â‘¢ï¼‰ï¼Œé‚£ä¹ˆå°±éœ€è¦ 7 æ¬¡ï¼Œå³ï¼šA -â‘ -> C ã€A -â‘¡-> Bã€C -â‘ -> Bã€A -â‘¢-> C ã€B -â‘ -> Aã€B -â‘¡-> Cã€A -â‘ -> Cã€‚
>
> ::: details ç‚¹æˆ‘æŸ¥çœ‹
>
> ![](./assets/11.gif)
>
> :::
>
> * å¦‚æœ N = 4ï¼Œé‚£ä¹ˆå°±éœ€è¦ 15 æ¬¡ã€‚
>
> ::: details ç‚¹æˆ‘æŸ¥çœ‹
>
> ![](./assets/12.gif)
>
> :::



* ç¤ºä¾‹ï¼š

```c
#include <stdio.h>

/**
 * å‰æï¼šå‡è®¾å¯ä»¥ç§»åŠ¨ n - 1 ä¸ªç›˜å­ï¼Œå¦‚ä½•ç§»åŠ¨ n ä¸ªç›˜å­ï¼Ÿ
 * é€’å½’å…¬å¼ï¼š
 *  â‘  å…ˆå°† n - 1 ä¸ªç›˜å­ç§»åŠ¨åˆ°ä¸­é—´æ†ï¼Œå³ï¼šA -->B
 *  â‘¡ å°†æœ€å¤§çš„ç›˜å­ç§»åŠ¨åˆ°ç›®æ ‡æ†ä¸Šï¼Œå³ï¼šA --> C
 *  â‘¢ å°†ä¸­é—´æ†ä¸Šçš„ç›˜å­ç§»åŠ¨åˆ°ç›®æ ‡æ†ä¸Šï¼Œå³ï¼šB --> C
 * è¾¹ç•Œæ¡ä»¶ï¼šå½“ n = 1 æ—¶ï¼Œåªéœ€è¦ç§»åŠ¨ä¸€æ¬¡
 * @param n æ±‰è¯ºå¡”çš„å±‚æ•°
 * @return ç§»åŠ¨æ¬¡æ•°
 */
int hanoi(int n) {
    if (n == 1) {
        return 1;
    }
    return hanoi(n - 1) * 2 + 1;
}

int main() {

    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);

    int n;
    printf("è¯·è¾“å…¥æ±‰è¯ºå¡”çš„å±‚æ•°ï¼š");
    scanf("%d", &n);

    // è®¡ç®—ç§»åŠ¨æ¬¡æ•°
    // S(n) = S(n-1) --> ç§»åŠ¨åˆ°ä¸­é—´æ†
    //        + 1 --> æœ€å¤§çš„ç§»åŠ¨åˆ°ç›®æ ‡æ†
    //        + S(n-1) --> ä¸­é—´æ†ç§»åŠ¨åˆ°ç›®æ ‡æ†
    printf("ç§»åŠ¨æ¬¡æ•°ï¼š%d\n", hanoi(n));

    return 0;
}
```



# ç¬¬ä¸‰ç« ï¼šå¯å˜å‚æ•°

## 3.1 æ¦‚è¿°

* æœ‰çš„æ—¶å€™ï¼Œå‡½æ•°å‚æ•°çš„æ•°é‡æ˜¯ä¸ç¡®å®šçš„ï¼Œå°±å¯ä»¥ä½¿ç”¨ C è¯­è¨€æä¾›çš„`å¯å˜å‚æ•°å‡½æ•°`ï¼Œå³ï¼šåœ¨å£°æ˜å¯å˜å‚æ•°å‡½æ•°çš„æ—¶å€™ï¼Œä½¿ç”¨çœç•¥å· `...` æ¥è¡¨ç¤ºå¯å˜æ•°é‡çš„å‚æ•°ã€‚
* è¯­æ³•ï¼š

```c
è¿”å›å€¼ç±»å‹ å‡½æ•°å(int count,...)
```

> [!CAUTION]
>
> * â‘  å¯å˜å‚æ•° `...` è¦æ”¾åœ¨å‚æ•°åˆ—è¡¨çš„ç»“å°¾ï¼Œå¦åˆ™å°†ä¼šæŠ¥é”™ï¼ï¼ï¼
> * â‘¡ æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ `printf` å‡½æ•°å°±æ˜¯ä¸€ä¸ªå¯å˜å‚æ•°å‡½æ•°ï¼Œå³ï¼š`extern int printf (const char *__restrict __format, ...);`
> * â‘¢ å¯å˜å‚æ•°å‡½æ•°ï¼Œåœ¨ç¼–å†™å„ç§å·¥å…·å‡½æ•°å’Œæ ¼å¼åŒ–è¾“å‡ºå‡½æ•°æ—¶éå¸¸æœ‰ç”¨ã€‚ä½†è¦å°å¿ƒç¡®ä¿ä¼ é€’çš„å‚æ•°æ•°é‡å’Œç±»å‹ä¸å‡½æ•°çš„é¢„æœŸç›¸åŒ¹é…ï¼Œä»¥é¿å…è¿è¡Œæ—¶é”™è¯¯ã€‚

## 3.2 åº”ç”¨ç¤ºä¾‹

* ç¤ºä¾‹ï¼š

```c
#include <stdarg.h>
#include <stdio.h>
/**
 * è·å–å¹³å‡å€¼
 * @param count
 * @param ...
 * @return
 */
double avg(int count, ...) {
    // â‘  å£°æ˜ä¸€ä¸ª va_list å˜é‡ï¼Œè¯¥å˜é‡å°†ä¿å­˜éå†å¯å˜å‚æ•°åˆ—è¡¨æ‰€éœ€çš„ä¿¡æ¯ã€‚
    va_list args;
    // â‘¡ åˆå§‹åŒ– va_list å˜é‡ï¼Œä½¿å…¶æŒ‡å‘å¯å˜å‚æ•°åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚
    va_start(args, count);
    // â‘¢ è®¿é—®å¯å˜å‚æ•°
    double sum = 0;
    for (int i = 0; i < count; i++) {
        /**
         * 1. è·å–å¯å˜å‚æ•°çš„ç±»å‹å’Œå€¼
         * va_arg(args, int)ï¼šè¿”å› args ä¸­çš„ä¸‹ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°çš„ç±»å‹ä¸º intï¼Œ
         * å¹¶å°† args çš„ä½ç½®æŒ‡å‘å‚æ•°åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªå‚æ•°ã€‚
         * 2. å°†è·å–åˆ°çš„å‚æ•°å€¼èµ‹ç»™ sum
         */
        sum += va_arg(args, int);
    }
    // â‘£ æ¸…ç† va_list å˜é‡
    va_end(args);
    // è¿”å›å¹³å‡å€¼
    return sum / count;
}

int main() {

    double avgValue = avg(5, 1, 2, 3, 4, 5);

    printf("avgValue = %.2f\n", avgValue);

    return 0;
}
```



# ç¬¬å››ç« ï¼šæŒ‡é’ˆå‡½æ•°å’Œå‡½æ•°æŒ‡é’ˆï¼ˆâ­ï¼‰

## 4.1 æŒ‡é’ˆå‡½æ•°ï¼ˆè¿”å›å€¼æ˜¯æŒ‡é’ˆï¼‰

### 4.1.1 æ¦‚è¿°

* C è¯­è¨€å…è®¸å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ˆåœ°å€ï¼‰ï¼Œè¿™æ ·çš„å‡½æ•°ç§°ä¸ºæŒ‡é’ˆå‡½æ•°ã€‚
* è¯­æ³•ï¼š

```c
è¿”å›å€¼ç±»å‹ * å‡½æ•°å(å½¢å‚åˆ—è¡¨){
    ... // å‡½æ•°ä½“
}
```

> [!CAUTION]
>
> æŒ‡é’ˆå‡½æ•°ä¸­çš„å‡½æ•°ä½“ return  å¿…é¡»è¿”å›ä¸€ä¸ªæŒ‡é’ˆï¼ˆåœ°å€ï¼‰ã€‚

### 4.1.2 åº”ç”¨ç¤ºä¾‹

* éœ€æ±‚ï¼šè·å–ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­è¾ƒé•¿çš„å­—ç¬¦ä¸²ã€‚



* ç¤ºä¾‹ï¼š

```c
#include <stdio.h>
#include <string.h>

/**
 * è·å–ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­è¾ƒé•¿è€…
 * @param str1
 * @param str2
 * @return
 */
char *maxLengthStr(char *str1, char *str2) {
    if (strlen(str1) >= strlen(str2)) {
        return str1;
    } else {
        return str2;
    }
}

int main() {

    char *str1 = "hello123";
    char *str2 = "world";

    // hello123 å’Œ world ä¸­è¾ƒé•¿çš„æ˜¯ï¼šhello123
    printf("%s å’Œ %s ä¸­è¾ƒé•¿çš„æ˜¯ï¼š%s\n", str1, str2, maxLengthStr(str1, str2));

    return 0;
}
```

### 4.1.3 æŒ‡é’ˆå‡½æ•°çš„æ³¨æ„äº‹é¡¹

* ä½¿ç”¨æŒ‡é’ˆä½œä¸ºå‡½æ•°è¿”å›å€¼çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šå‡½æ•°è¿è¡Œç»“æŸåä¼šé”€æ¯åœ¨å®ƒå†…éƒ¨å®šä¹‰çš„æ‰€æœ‰å±€éƒ¨æ•°æ®ï¼ŒåŒ…æ‹¬ï¼šå±€éƒ¨å˜é‡ã€å±€éƒ¨æ•°ç»„å’Œå½¢å¼å‚æ•°ã€‚

> [!CAUTION]
>
> * â‘  å‡½æ•°è¿”å›çš„æŒ‡é’ˆè¯·å°½é‡ä¸è¦æŒ‡å‘è¿™äº›æ•°æ®ï¼ŒC è¯­è¨€æ²¡æœ‰ä»»ä½•æœºåˆ¶æ¥ä¿è¯è¿™äº›æ•°æ®ä¼šä¸€ç›´æœ‰æ•ˆï¼Œå®ƒä»¬åœ¨åç»­ä½¿ç”¨è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå¼•å‘è¿è¡Œæ—¶é”™è¯¯ã€‚
> * â‘¡ å‡½æ•°è¿è¡Œç»“æŸåä¼šé”€æ¯æ‰€æœ‰çš„å±€éƒ¨æ•°æ®ï¼Œè¿™ä¸ªè§‚ç‚¹å¹¶æ²¡é”™ï¼Œå¤§éƒ¨åˆ† C è¯­è¨€æ•™æä¹Ÿéƒ½å¼ºè°ƒäº†è¿™ä¸€ç‚¹ã€‚ä½†æ˜¯ï¼Œè¿™é‡Œæ‰€è°“çš„é”€æ¯å¹¶ä¸æ˜¯å°†å±€éƒ¨æ•°æ®æ‰€å ç”¨çš„å†…å­˜å…¨éƒ¨æŠ¹æ‰ï¼Œè€Œæ˜¯ç¨‹åºæ”¾å¼ƒå¯¹å®ƒçš„ä½¿ç”¨æƒé™ï¼Œå¼ƒä¹‹ä¸ç†ï¼Œåé¢çš„ä»£ç å¯ä»¥éšæ„ä½¿ç”¨è¿™å—å†…å­˜ã€‚



* ç¤ºä¾‹ï¼šé”™è¯¯æ¼”ç¤º

```c
#include <stdio.h>

int *func(){
    int n = 100;
    return &n;
}

int main(){
    int *p = func(), n;
    n = *p;
    printf("value = %d\n", n);
    return 0;
}
```

## 4.2 å‡½æ•°æŒ‡é’ˆï¼ˆæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆï¼‰

### 4.2.1 æ¦‚è¿°

* ä¸€ä¸ªå‡½æ•°æ€»æ˜¯å ç”¨ä¸€æ®µè¿ç»­çš„å†…å­˜åŒºåŸŸï¼Œå‡½æ•°ååœ¨è¡¨è¾¾å¼ä¸­æœ‰æ—¶ä¹Ÿä¼šè¢«è½¬æ¢ä¸ºè¯¥å‡½æ•°æ‰€åœ¨å†…å­˜åŒºåŸŸçš„é¦–åœ°å€ï¼Œè¿™å’Œæ•°ç»„åéå¸¸ç±»ä¼¼ã€‚
* æˆ‘ä»¬å¯ä»¥æŠŠå‡½æ•°çš„è¿™ä¸ªé¦–åœ°å€ï¼ˆæˆ–ç§°å…¥å£åœ°å€ï¼‰èµ‹äºˆä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼Œä½¿æŒ‡é’ˆå˜é‡æŒ‡å‘å‡½æ•°æ‰€åœ¨çš„å†…å­˜åŒºåŸŸï¼Œç„¶åé€šè¿‡æŒ‡é’ˆå˜é‡å°±å¯ä»¥æ‰¾åˆ°å¹¶è°ƒç”¨è¯¥å‡½æ•°ï¼Œè¿™ç§æŒ‡é’ˆå°±æ˜¯å‡½æ•°æŒ‡é’ˆã€‚
* å‡½æ•°æŒ‡é’ˆå£°æ˜è¯­æ³•ï¼š

```c
è¿”å›å€¼ç±»å‹ (*æŒ‡é’ˆå˜é‡å)(å‚æ•°åˆ—è¡¨);
```

> [!CAUTION]
>
> - â‘  ç®€å•æ¥è¯´ï¼Œå‡½æ•°æŒ‡é’ˆï¼Œå°±æ˜¯æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆã€‚
> - â‘¡ å‚æ•°åˆ—è¡¨ä¸­å¯ä»¥åŒæ—¶ç»™å‡ºå‚æ•°çš„ç±»å‹å’Œåç§°ï¼Œä¹Ÿå¯ä»¥åªç»™å‡ºå‚æ•°çš„ç±»å‹ï¼Œçœç•¥å‚æ•°çš„åç§°ã€‚
> - â‘¢ ä¸å¯ä»¥çœç•¥ `()` ï¼Œå¦‚æœå†™æˆ `è¿”å›å€¼ç±»å‹ *æŒ‡é’ˆå˜é‡å(å‚æ•°åˆ—è¡¨);`ï¼Œå°±å˜ä¸ºäº†å‡½æ•°åŸå‹ï¼Œè€Œä¸å†æ˜¯å‡½æ•°æŒ‡é’ˆã€‚

* å‡½æ•°æŒ‡é’ˆè°ƒç”¨è¯­æ³•ï¼š

```c
(*æŒ‡é’ˆå˜é‡)(å®å‚åˆ—è¡¨);
```

> [!CAUTION]
>
> - â‘  C è¯­è¨€è§„å®šï¼Œ`å‡½æ•°å`æœ¬èº«å°±æ˜¯æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆï¼Œé€šè¿‡`å‡½æ•°å`å¯ä»¥è·å–å‡½æ•°åœ°å€ã€‚
> - â‘¡ å¯¹æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆå˜é‡ä¸èƒ½è¿›è¡Œç®—æœ¯è¿ç®—ï¼Œå¦‚ï¼šp+nï¼Œp++ï¼Œp-- ç­‰è¿ç®—æ˜¯æ— æ„ä¹‰çš„ã€‚
> - â‘¢ ç”¨å‡½æ•°åè°ƒç”¨å‡½æ•°ï¼Œåªèƒ½è°ƒç”¨æ‰€æŒ‡å®šçš„ä¸€ä¸ªå‡½æ•°ï¼Œè€Œé€šè¿‡æŒ‡é’ˆå˜é‡è°ƒç”¨å‡½æ•°æ¯”è¾ƒçµæ´»ï¼Œå¯ä»¥æ ¹æ®ä¸åŒæƒ…å†µå…ˆåè°ƒç”¨ä¸åŒçš„å‡½æ•°ã€‚

### 4.2.2 åº”ç”¨ç¤ºä¾‹

* éœ€æ±‚ï¼šä½¿ç”¨å‡½æ•°æŒ‡é’ˆè°ƒç”¨æ–¹å¼æ¥è°ƒç”¨å‡½æ•°ã€‚



* ç¤ºä¾‹ï¼š

```c
#include <stdio.h>

void print(int n) {
    printf("%d\n", n);
}

int main() {

    // å£°æ˜å‡½æ•°æŒ‡é’ˆï¼ˆå˜é‡ï¼‰
    void (*p)(int);
    // å°†å‡½æ•°èµ‹å€¼ç»™å‡½æ•°æŒ‡é’ˆ
    p = &print;

    int num = 10;

    // æ™®é€šå‡½æ•°è°ƒç”¨æ–¹å¼æ¥è°ƒç”¨å‡½æ•°
    print(num);

    // å‡½æ•°æŒ‡é’ˆè°ƒç”¨æ–¹å¼æ¥è°ƒç”¨å‡½æ•°
    (*p)(num);

    return 0;
}
```

### 4.2.3 åº”ç”¨ç¤ºä¾‹

* éœ€æ±‚ï¼šä½¿ç”¨å‡½æ•°æŒ‡é’ˆè°ƒç”¨æ–¹å¼æ¥è°ƒç”¨å‡½æ•°ã€‚



* ç¤ºä¾‹ï¼š

```c
#include <stdio.h>

int max(int a, int b) {
    return a > b ? a : b;
}

int main() {

    // å£°æ˜å‡½æ•°æŒ‡é’ˆï¼ˆå˜é‡ï¼‰å¹¶èµ‹å€¼
    int (*p)(int, int) = max;

    int a = 10;
    int b = 20;

    // æ™®é€šå‡½æ•°è°ƒç”¨æ–¹å¼æ¥è°ƒç”¨å‡½æ•°
    int maxValue = max(a, b);
    printf("%d å’Œ %d ä¸­çš„æœ€å¤§å€¼æ˜¯ %d\n", a, b, maxValue);

    // å‡½æ•°æŒ‡é’ˆè°ƒç”¨æ–¹å¼æ¥è°ƒç”¨å‡½æ•°
    maxValue = (*p)(a, b);
    printf("%d å’Œ %d ä¸­çš„æœ€å¤§å€¼æ˜¯ %d\n", a, b, maxValue);

    return 0;
}
```



# ç¬¬äº”ç« ï¼šå›è°ƒå‡½æ•°

## 5.1 æ¦‚è¿°

* æ‰€è°“çš„`å›è°ƒå‡½æ•°`å°±æ˜¯å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°çš„æ–¹å¼ï¼Œä»¥ä¾¿è¯¥å‡½æ•°åœ¨æŸä¸ªäº‹ä»¶å‘ç”Ÿåè°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚

## 5.2 JavaScript è¯­è¨€ä¸­çš„å›è°ƒå‡½æ•°

* åœ¨ JavaScript ä¸­å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼ˆå¤´ç­‰å…¬æ°‘ï¼‰ï¼Œè¿™æ„å‘³ç€å‡½æ•°å¯ä»¥åƒå˜é‡ä¸€æ ·ä¼ é€’ã€‚

> [!NOTE]
>
> * â‘  ç”±äºJavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œå›è°ƒå‡½æ•°ä¸»è¦ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œã€‚
> * â‘¡ JavaScript ä¸­æœ‰å¤§é‡çš„å¼‚æ­¥æ“ä½œï¼Œå¦‚ï¼šäº‹ä»¶å¤„ç†ã€ç½‘ç»œè¯·æ±‚ç­‰ï¼Œå›è°ƒå‡½æ•°å¯ä»¥å»¶è¿Ÿæ‰§è¡Œï¼Œç­‰æ“ä½œå®Œæˆåå†å›è°ƒã€‚
> * â‘¢ JavaScript æœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œå¼€å‘è€…ä¸éœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜ã€‚



* ç¤ºä¾‹ï¼š

```js {22}
/**
* @param name
* @param callback æ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°
*/
function asyncFunction(name, callback) {
  setTimeout(function() {
    console.log("æ‰§è¡Œå¼‚æ­¥æ“ä½œ");
    callback();// é€šè¿‡ callback å»æ‰§è¡Œ callbackFunction å‡½æ•°çš„è¿‡ç¨‹ï¼Œå°±æ˜¯å‡½æ•°çš„å›è°ƒ
  }, 1000);
}

/**
* å›è°ƒå‡½æ•°
*/
function done() {
  console.log('Callback function executed.');
}

/**
* done æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°
*/
asyncFunction('John', done);
```

## 5.3 C è¯­è¨€ä¸­çš„å›è°ƒå‡½æ•°

* C è¯­è¨€æœ¬èº«æ²¡æœ‰å¼‚æ­¥ç¼–ç¨‹çš„ç›´æ¥æ”¯æŒï¼Œå›è°ƒå‡½æ•°ä¸€èˆ¬ç”¨äºåŒæ­¥æ“ä½œä¸­ï¼Œå›è°ƒå‡½æ•°å¾€å¾€æ˜¯ç«‹å³è°ƒç”¨çš„ã€‚

> [!NOTE]
>
> * â‘  C è¯­è¨€ä¸­çš„å¼‚æ­¥æ“ä½œé€šå¸¸é€šè¿‡`å¤šçº¿ç¨‹`æˆ–`äº‹ä»¶é©±åŠ¨ç¼–ç¨‹æ¨¡å‹`å®ç°ï¼Œå›è°ƒå‡½æ•°å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼å»¶è¿Ÿæ‰§è¡Œï¼Œå¦‚ï¼šåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œå›è°ƒå‡½æ•°ç”¨äºå¤„ç†ç¡¬ä»¶ä¸­æ–­ã€ä¿¡å·ç­‰ã€‚
> * â‘¡ C è¯­è¨€ä¸æä¾›è‡ªåŠ¨åƒåœ¾å›æ”¶ï¼Œå›è°ƒå‡½æ•°å¦‚æœæ¶‰åŠåŠ¨æ€åˆ†é…å†…å­˜ï¼Œå¼€å‘è€…éœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚

* å…¶åŸç†æ˜¯ï¼šæœ‰ä¸€ä¸ªå‡½æ•° funï¼Œå®ƒæœ‰ä¸¤ä¸ªå½¢å‚ x1 å’Œ x2ï¼Œå¹¶ä¸” x1 å’Œ x2 æ˜¯æŒ‡é’ˆå‡½æ•°çš„æŒ‡é’ˆå˜é‡ï¼Œå³ï¼šå‡½æ•°æŒ‡é’ˆã€‚åœ¨è°ƒç”¨å‡½æ•° fun çš„æ—¶å€™ï¼Œå®å‚ä¸ºä¸¤ä¸ªå‡½æ•°å f1 å’Œ f2 ï¼Œç»™å½¢å‚ä¼ é€’çš„æ—¶å‡½æ•° f1 å’Œ f2 çš„å…¥å£åœ°å€ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨å‡½æ•° fun ä¸­è°ƒç”¨ f1 å‡½æ•°å’Œ f2 å‡½æ•°ã€‚

```c
/**
 * å®šä¹‰ fun å‡½æ•°ï¼Œå½¢å‚æ˜¯æŒ‡é’ˆå‡½æ•°çš„æŒ‡é’ˆå˜é‡
 * @param x1 å‡½æ•°æŒ‡é’ˆ
 * @param x2 å‡½æ•°æŒ‡é’ˆ
 */
void fun(int (*x1)(int), int (*x2)(int, int)) {
    int a, b;
    a = x1(10);
    b = x2(10, 20);
    printf("a = %d, b = %d\n", a, b);
}
```



* ç¤ºä¾‹ï¼šä½¿ç”¨å›è°ƒå‡½æ•°çš„æ–¹å¼ï¼Œç»™æ•°ç»„ä¸­å…ƒç´ èµ‹å€¼ï¼Œè¦æ±‚èµ‹çš„å€¼æ˜¯éšæœºå€¼

```c
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <unistd.h>

/**
 * åˆå§‹åŒ–éšæœºæ•°ç”Ÿæˆå™¨çš„å‡½æ•°
 */
void initializeRandomSeed() {
    srand((unsigned int)time(nullptr) + getpid());
}

/**
 * ç”ŸæˆæŒ‡å®šèŒƒå›´çš„éšæœºæ•°çš„å‡½æ•°
 * @param min æœ€å°å€¼
 * @param max æœ€å¤§å€¼
 * @return
 */
int randomInRange(int min, int max) {
    return rand() % (max - min + 1) + min;
}

/**
 * // åˆå§‹åŒ–æ•°ç»„å…ƒç´ 
 * @param arr æ•°ç»„
 * @param len æ•°ç»„å…ƒç´ çš„ä¸ªæ•°
 * @param random å›è°ƒå‡½æ•°
 */
void initArr(int arr[], int len, int (*random)(int, int)) {
    for (int i = 0; i < len; ++i) {
        arr[i] = (*random)(1, 100);
    }
}

#define LEN 10

int main() {

    // ç¦ç”¨ stdout ç¼“å†²åŒº
    setbuf(stdout, nullptr);

    // åˆå§‹åŒ–éšæœºæ•°ç”Ÿæˆå™¨ç§å­
    initializeRandomSeed();

    int arr[LEN] = {0};

    initArr(arr, LEN, randomInRange);

    // éå†æ•°ç»„
    for (int i = 0; i < LEN; ++i) {
        printf("arr[%d] = %d \n", i, arr[i]);
    }

    return 0;
}
```



# ç¬¬å…­ç« ï¼šå‡½æ•°è¯´æ˜ç¬¦ï¼ˆâ­ï¼‰

## 6.1 æ¦‚è¿°

* åœ¨ C è¯­è¨€ä¸­ï¼Œå‡½æ•°ä¸€æ—¦è¢«å®šä¹‰ï¼Œå°±å¯ä»¥è¢«å…¶å®ƒçš„å‡½æ•°è°ƒç”¨ï¼Œå…¶å®æ˜¯å› ä¸ºå®ƒé»˜è®¤çš„ä¿®é¥°ç¬¦æ˜¯ `extern` ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```c
extern int printf (const char *__restrict __format, ...);
```

* ä½†æ˜¯ï¼Œå¯¹äºä¸€ä¸ª C ç¨‹åºè€Œè¨€ï¼Œå¯èƒ½ç”±å¾ˆå¤š `.c` æºæ–‡ä»¶ç»„æˆï¼Œæˆ‘ä»¬å¹¶ä¸ä¸€å®šæƒ³è®©æŸä¸ªæºæ–‡ä»¶ä¸­å®šä¹‰çš„å‡½æ•°è¢«å…¶å®ƒæºæ–‡ä»¶ä¸­çš„å‡½æ•°è°ƒç”¨ã€‚æ‰€ä»¥ï¼ŒC è¯­è¨€å°†å‡½æ•°åˆ†ä¸ºä¸¤ç±»ï¼š`å†…éƒ¨å‡½æ•°ï¼ˆé™æ€å‡½æ•°ï¼‰`å’Œ`å¤–éƒ¨å‡½æ•°`ã€‚

> [!CAUTION]
>
> * â‘  C è¯­è¨€çš„ç³»ç»Ÿåº“ä¸­çš„å‡½æ•°éƒ½æ˜¯å¤–éƒ¨å‡½æ•°ï¼Œä»¥ä¾¿è®©æ‰€æœ‰çš„äººå¯ä»¥è°ƒç”¨å®ƒã€‚
> * â‘¡ å¦‚æœåœ¨è‡ªå®šä¹‰å‡½æ•°çš„æ—¶å€™ï¼Œçœç•¥äº† extern å…³é”®å­—ï¼Œé»˜è®¤å°±æ˜¯è¡¨ç¤ºå¤–éƒ¨å‡½æ•°ã€‚

## 6.2 å†…éƒ¨å‡½æ•°ï¼ˆé™æ€å‡½æ•°ï¼‰

* å¦‚æœåœ¨ä¸€ä¸ª `.c` çš„æºæ–‡ä»¶ä¸­å®šä¹‰çš„å‡½æ•°åªèƒ½è¢«æœ¬æ–‡ä»¶ä¸­çš„å‡½æ•°è°ƒç”¨ï¼Œè€Œä¸èƒ½è¢«åŒä¸€ä¸ªæºç¨‹åºçš„å…¶å®ƒæ–‡ä»¶ä¸­çš„å‡½æ•°è°ƒç”¨ï¼Œè¿™ç§å‡½æ•°å°±ç§°ä¸ºå†…éƒ¨å‡½æ•°ã€‚æ­¤å¤–ï¼Œå†…éƒ¨å‡½æ•°éœ€è¦ä½¿ç”¨ `static` å…³é”®å­—ä¿®é¥°ã€‚
* è¯­æ³•ï¼š

```c
static è¿”å›å€¼ç±»å‹ å‡½æ•°å(å½¢å‚åˆ—è¡¨) {
    ...
}
```

* é¡¹ç›®ç»“æ„ï¼š

```txt
â”œâ”€ğŸ“ include/---- # å¤´æ–‡ä»¶ç›®å½•
â”‚â€ƒâ””â”€ğŸ“„ add.h
â”œâ”€ğŸ“ module/----- # å‡½æ•°å®ç°ç›®å½•
â”‚â€ƒâ””â”€ğŸ“„ add.c
â””â”€ğŸ“„ main.c------ # ä¸»å‡½æ•°
```

* å¯¹äº `include/add.h` æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š

```c
#ifndef ADD_H
#define ADD_H

int add(int a, int b);

#endif /* ADD_H */
```

* å¯¹äº `module/add.c` æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š

```c {3}
#include "../include/add.h"

static int add(int a, int b) { 
    return a + b; 
}
```

* å¯¹äº `main.c` æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š

```c
#include "./include/add.h"
#include <stdio.h>

int main() {

  int a = 10;
  int b = 20;

  int sum = add(a, b);

  printf("Sum = %d\n", sum);

  return 0;
}
```

* ä½¿ç”¨ gcc å‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼š

```shell
gcc main.c module/add.c -o main.exe
```

![](./assets/5.gif)

## 6.3 å¤–éƒ¨å‡½æ•°

* å¤–éƒ¨å‡½æ•°åœ¨æ•´ä¸ªæºç¨‹åºä¸­éƒ½æœ‰æ•ˆï¼Œåªéœ€è¦åœ¨å®šä¹‰å‡½æ•°çš„æ—¶å€™ï¼ŒåŠ ä¸Š `extern` å…³é”®å­—å³å¯ã€‚

* è¯­æ³•ï¼š

```c
extern è¿”å›å€¼ç±»å‹ å‡½æ•°å(å½¢å‚åˆ—è¡¨) {
    ...
}
```

> [!NOTE]
>
> * â‘  å¦‚æœçœç•¥ `extern` å…³é”®å­—ï¼Œé»˜è®¤è¡¨ç¤ºçš„å°±æ˜¯å¤–éƒ¨å‡½æ•°ã€‚
> * â‘¡ åœ¨ `MSYS2` ä¸­ï¼Œå€¾å‘äºçœç•¥ `extern` å…³é”®å­—ï¼Œå¦‚ï¼š`int printf (const char *__restrict __format, ...)` ã€‚
> * â‘¢ åœ¨ `GCC` ä¸­ï¼Œå€¾å‘äºåŠ ä¸Š `extern` å…³é”®å­—ï¼Œå¦‚ï¼š`extern int printf (const char *__restrict __format, ...)`ã€‚

* é¡¹ç›®ç»“æ„ï¼š

```txt
â”œâ”€ğŸ“ include/---- # å¤´æ–‡ä»¶ç›®å½•
â”‚â€ƒâ””â”€ğŸ“„ add.h
â”œâ”€ğŸ“ module/----- # å‡½æ•°å®ç°ç›®å½•
â”‚â€ƒâ””â”€ğŸ“„ add.c
â””â”€ğŸ“„ main.c------ # ä¸»å‡½æ•°
```

* å¯¹äº `include/add.h` æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š

```c
#ifndef ADD_H
#define ADD_H

int add(int a, int b);

#endif /* ADD_H */
```

* å¯¹äº `module/add.c` æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š

```c {3}
#include "../include/add.h"

int add(int a, int b) { 
    return a + b; 
}
```

* å¯¹äº `main.c` æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š

```c
#include "./include/add.h"
#include <stdio.h>

int main() {

  int a = 10;
  int b = 20;

  int sum = add(a, b);

  printf("Sum = %d\n", sum);

  return 0;
}
```

* ä½¿ç”¨ gcc å‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼š

```shell
gcc main.c module/add.c -o main.exe
```

![](./assets/6.gif)

